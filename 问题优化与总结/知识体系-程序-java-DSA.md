## æ•°æ®ç»“æ„ä¸ç®—æ³•

æ•°æ®ç»“æ„ä¸‰è¦ç´ ï¼šæ•°æ®é€»è¾‘ç»“æ„ã€æ•°æ®å­˜å‚¨ç»“æ„å’Œæ•°æ®çš„è¿ç®—

é€»è¾‘ç»“æ„ï¼ˆèŠ‚ç‚¹æ•´ä½“å…³ç³»ï¼‰ï¼š
    é›†åˆç»“æ„ï¼šèŠ‚ç‚¹äº’æ–¥ï¼ˆHashSetï¼ŒTreeSetï¼‰
    çº¿æ€§ç»“æ„ï¼š1å¯¹1
        æ™®é€šï¼šï¼ˆStringï¼ŒArrayListï¼ŒVectorï¼ŒLinkedListï¼ŒHashMapï¼ŒHashTableï¼ŒLinkedHashMapï¼‰
        å—é™ï¼šé˜Ÿåˆ—å’Œæ ˆï¼Œä¸²
        æ‹“å±•ï¼šå¹¿ä¹‰è¡¨ï¼ŒäºŒç»´æ•°ç»„
    æ ‘å½¢ç»“æ„ï¼š1å¯¹å¤šï¼ˆTreeMapï¼Œå †ï¼Œhuffmanæ ‘ï¼‰
    å›¾å½¢ç»“æ„ï¼šå¤šå¯¹å¤šç¯çŠ¶
        ï¼ˆDaggerï¼ŒDAG æœ‰å‘æ— ç¯ä¾èµ–ï¼›Gradle ä¾èµ–ï¼‰
        æ— å‘
å­˜å‚¨ç»“æ„ï¼ˆèŠ‚ç‚¹å’Œä¸‹ä¸ªèŠ‚ç‚¹çš„å…³ç³»ï¼‰ï¼š    
    é¡ºåºå­˜å‚¨ç»“æ„
    æ•£åˆ—å­˜å‚¨ç»“æ„ï¼šé¡ºåºå­˜å‚¨+æ•£åˆ—ï¼ˆHashMapï¼‰
    ç´¢å¼•å­˜å‚¨ç»“æ„ï¼šé¡ºåºå­˜å‚¨+ç´¢å¼•ï¼ˆtlvæ ¼å¼ï¼ŒSerizableï¼ŒprotoBufferï¼ŒflatBufferï¼‰
    é“¾å¼å­˜å‚¨ç»“æ„ï¼ˆå•é“¾ï¼ŒåŒé“¾ï¼Œè·³è·ƒåˆ—è¡¨ï¼‰

æ“ä½œï¼š
    å¢åˆ æ”¹ï¼Œç´¢å¼•éå†ï¼ŒæŸ¥æ‰¾æ’åºï¼Œé”€æ¯

### å¯è§†åŒ–
[](https://www.cs.usfca.edu/~galles/visualization/Algorithms.html)
ã€ŠIntruduce arthrigsimã€‹
KNUTH -ã€ŠThe Art of Computer Programmingã€‹åŸºæœ¬ç®—æ³•ï¼Œæ’åºä¸æœç´¢ï¼ŒåŠæ•°å€¼è®¡ç®—ï¼Œ
ç»„åˆç®—æ³•ï¼ˆæšä¸¾ä¸å›æº¯-å›¾è®º-æœ€ä¼˜åŒ–ä¸é€’å½’ï¼‰ï¼Œé€ å¥ç®—æ³•

### é€»è¾‘æ•°æ®ç»“æ„
Array
String (è£…é¥° char array)
time/Date ï¼ˆè£…é¥° longï¼‰
collection
Concurrent access

```text
                                            +--------------+                                          +----------------+
                                            |              |                                          |                |
                                            |   Collection |                                          |     Map        |
                                            +------+-------+                                          +-------^--------+
                                                   ^                                                     +-----------------------+------------+
                           +---------------------------------------------+                               +                       +            |
                           |                       |                     |                             .....                  ......          |
                   +-------+-------+        +------+------+       ++-----+-----+                 +--+---------+-+         ++-----------+      |    +---------------+
                   |unsort,no repeat        | sortable ,repeatable +                 +              +         +            +                  |    |               |
                   |   Set         +        |   List      +       +    Queue   +                 + HashMap      +         +  SortMap   +      |    |  Dictionary   |
                   +------+--------+        +-----+-------+       +-------+----+                 +-------+------+         +-------+----+      |    +---------------+
                          ^                       ^                       ^                              ^                        ^           |
       +--------------->  +                       + <---------------------+                              |                        |           |            ^
    .......           .......                   ....                      |                              |                        |           |            |
+--------------+   +---------------+  +-----------+  +---------+    +-----+-----------+         +--------+--------+        +------+------+    |  . +-------+--------+
|              |   |               |  |           |  |         |    |                 |         |                 |        |             |    |  . |                |
|  TreeSet     |   |   HashSet     |  | ArrayList |  | Vector  |    |   LinkedList    |         |   LinkedHashMap |        |   TreeMap   |    +--.-+   HashTable    |
+--------------+   +---------------+  +-----------+  +---------+    +-----------------+         +-----------------+        +-------------+       . +----------------+



```




#### ArrayList
```java
            +----------------------------------------------------------------------------------+
            |           ArrayList:AbstractList     AbstractList                                |
            |              elementData:Object[]     modCount:int        DEFAULT_CAPACITY = 10; |
            |              size:int                                                            |
            |                                                                                  |
            |              add(e:E)                   remove(index:int )                       |
            |              add(index:int ,element:E)  remove(o:Object )                        |
            |              ensureCapacityInternal()                                            |
            |                                                                                  |
            |              grow()                                                              |
            |              hugeCapacity()//OutOfMemoryError()                                  |
            +----------------------------------------------------------------------------------+


```
åˆå§‹å®¹é‡ 0
åŠ è½½å› å­ é¦–æ¬¡æ‰©å®¹DEFAULT_CAPACITY=10ï¼Œè¶…è¿‡å®¹é‡1.5å€//é€‚ç”¨éçº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œ

#### Vector

```java
            +----------------------------------------------------------------------------------+
            |                      VectorvEv:AbstractList                                      |
            |                                                                                  |
            |                          elementData:Object[]                                    |
            |                                                                                  |
            |                          elementCount: int                                       |
            |                                                                                  |
            |                          capacityIncrement:int //custom                          |
            |                                                                                  |
            +----------------------------------------------------------------------------------+

```

åˆå§‹å®¹é‡ é»˜è®¤10ï¼Œè¶…è¿‡å®¹é‡ï¼Œæ‰§è¡Œæ‰©å®¹
æ‰©å®¹å¢é‡ å¢åŠ ä¸€å€ï¼Œæˆ–è€…è‡ªå®šä¹‰capacityIncrementã€‚ArrayListæ¯”è¾ƒçœç©ºé—´ã€‚ //åŒæ­¥æ–¹æ³•ï¼Œæ•ˆç‡æ…¢ï¼Œéœ€è¦æ‰©å®¹å¤§ï¼Œä¿è¯å¹¶å‘æ—¶ï¼Œä¸ç”¨é¢‘ç¹æ‰©å®¹

ä¸ArrayListåŒºåˆ«æ˜¯ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½åŠ Synchronizedï¼Œæ€§èƒ½æ²¡æœ‰ArrayListé«˜
#### LinkedList
```java
            +----------------------------------------------------------------------------------+
            |           LinkedList:AbstractSequentialList                                      |
            |               last:Node<E>         first:Node<E>    size:int                     |
            |                                                                                  |
            |               add(e:E ):boolean                                                  |
            |               linkLast( e:E)                                                     |
            +----------------------------------------------------------------------------------+
            |               Queue                Deque:Queue      AbstractSequentialList:      |
            |                offer(e:E)            push(e:E )               AbstractList       |
            |                linkLast()            addFirst()          modCount :int           |
            |                                                                                  |
            |                poll()                pop()                                       |
            |                unlinkFirst()         removeFirst()                               |
            |                                      peek()                                      |
            +----------------------------------------------------------------------------------+
            |              Node                                                                |
            |                item: E                                                           |
            |                next:Node^E^                                                      |
            |                pre^:Node<E>                                                      |
            +----------------------------------------------------------------------------------+
```



#### HashMap
JDK7ä¸­HashMapé‡‡ç”¨çš„æ˜¯ä½æ¡¶+é“¾è¡¨çš„æ–¹å¼ï¼Œå³æˆ‘ä»¬å¸¸è¯´çš„æ•£åˆ—é“¾è¡¨çš„æ–¹å¼ï¼Œè€ŒJDK8ä¸­é‡‡ç”¨çš„æ˜¯ä½æ¡¶+é“¾è¡¨/çº¢é»‘æ ‘
```
            +----------------------------------------------------------------------------------+
            |                      HashMap:AbstractMap                AbstractMap:Map          |
            |                      entrySet:Set<Map.Entry<K,V<>        keySet:Set<K>           |
            |      put(K,V )       table:Node<K,V>[]                   values:Collection<V>    |
            |                      loadFactor:float=0.75f                                      |
            |      resize()        modCount:int                                                |
            |                      size:int                                                    |
            |                      threshold:int                                               |//threshold å®¹é‡*åŠ è½½å› å­
            |           treeifyBin()                                                           |
            +----------------------------------------------------------------------------------+
            |         TreeNode: LinkedHashMap.LinkedHashMapEntry:.Node         .Node:Map.Entry |
            |            parent;TreeNode       before, after                           hash    |
            |            left;  TreeNode                                               key     |
            |            right; TreeNode                                               value   |
            |            prev;  TreeNode                                               next    |
            |            red;   boolean                                                        |
            |                                                                                  |
            |            balanceDeletion()               removeTreeNode()                      |
            |                                            untreeify()                           |
            |                                            split()                               |
            +----------------------------------------------------------------------------------+
    static class Node<K,V> implements Map.Entry<K,V> {
        final int hash;
        final K key;
        V value;
        Node<K,V> next;
```
MIN_TREEIFY_CAPACITY = 64
TREEIFY_THRESHOLD = 8;
UNTREEIFY_THRESHOLD = 6

**tabæ‰©å®¹**
åˆå§‹å®¹é‡ tableé»˜è®¤0ï¼Œé»˜è®¤åŠ è½½å› å­0.75ï¼ˆæ³Šæ¾åˆ†å¸ƒæœ‰å…³ï¼‰//tabé•¿åº¦ä¸æ˜¯è´¨æ•°æˆ–å¥‡æ•°ï¼Œhashåœ¨tabä¸Šçš„åˆ†å¸ƒä¸ç¡®å®šæ˜¯å¦åˆ†æ•£ï¼Œéœ€è¦ç”¨æ³Šæ¾åˆ†å¸ƒæ¥ä¿è¯åˆ†æ•£åˆ†å¸ƒåˆ°tabä½ç½®
æ‰©å®¹å¢é‡ï¼ˆæ‰©å®¹hashè¡¨ï¼‰  
    put é¦–æ¬¡16ï¼ˆå¦‚æœoldThr>0ï¼Œä¼˜å…ˆå–oldThrï¼‰ï¼ŒMapé˜ˆå€¼ä¸ºtableä¹˜ä¸ŠåŠ è½½å› å­ï¼›//2çš„å¹‚æ¬¡æ–¹ï¼ŒBooleançš„hash 1101(2) 11
    putAll é¦–æ¬¡è®¾ç½® expect/0.75+1ï¼Œé˜ˆå€¼æ˜¯æœ€æ¥è¿‘å®¹é‡çš„2æ¬¡å¹‚
    Mapé˜ˆå€¼å’Œ tableæ‰©å®¹2å€ï¼ˆå‡å°‘æ‰©å®¹åé‡æ–°hashï¼‰//2çš„å¹‚æ¬¡æ–¹ï¼Œå®¹æ˜“ä½è¿ç®—å–tabindex=i = (n - 1) & hashï¼›ä½è¿ç®—ä»£æ›¿å–æ¨¡æ•ˆç‡é«˜
çº¢é»‘æ ‘é“¾è¡¨åŒ–
    æ‰©å®¹ï¼Œæ‹†åˆ†çº¢é»‘æ ‘ï¼ŒèŠ‚ç‚¹å°äºç­‰äº6
    removeï¼Œå½“å‰çº¢é»‘æ ‘æ»¡è¶³ä¸€å®šæ¡ä»¶ (root.right == null  || root.left == null,|| root.left.left == null )

å–æ¶ˆæ ‘åŒ–ï¼štableå°äº64



- å“ˆå¸Œç¢°æ’
```java
    static final int hash(Object key) {
        int h;
        return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);//æµ®ç‚¹å‹ä½ä½æ”¾ä½ç½®æœ‰å¯èƒ½æ˜¯0ï¼ˆSEEEEEEEEMMMMMMMMMMMMMMMMMMMMMMMï¼‰hashå®¹æ˜“ä¸º0ï¼Œhashå†²çª
    }

    class Map.Entry{
        public final int hashCode() {
            return Objects.hashCode(key) ^ Objects.hashCode(value);
        }
    }
```
hash bucket å¤§å°è®¾ç½®ä¸º length=2^nã€‚
2^n-1å¯¹åº”çš„äºŒè¿›åˆ¶ 1111...111ï¼Œhash bucketçš„ç´¢å¼•å€¼æ˜¯é€šè¿‡ hash & (tab.length - 1)ï¼Œè®¾ç½®ä¸º2^nï¼Œå‡å°‘å“ˆå¸Œç¢°æ’

- é“¾åœ°å€è¿‡é•¿ï¼Œï¼ˆçº¢é»‘æ ‘ï¼‰æ ‘åŒ–
  TREEIFY_THRESHOLD = 8æ—¶ï¼Œå¯¹å“ˆå¸Œå†²çªé“¾åœ°å€æ ‘åŒ–

```
å“ˆå¸Œç¢°ç¢°æ’æ—¶çš„è§£å†³æ–¹æ³•
1. å¼€æ”¾åœ°å€æ³•ï¼ˆHashTableï¼‰ï¼ŒåŒ…æ‹¬ çº¿æ€§æ¢æµ‹å†æ•£åˆ—ï¼ŒäºŒæ¬¡æ¢æµ‹å†æ•£åˆ—ï¼Œä¼ªéšæœºæ¢æµ‹å†æ•£åˆ—
2. é“¾åœ°å€æ³•ï¼ˆHashMap ç”¨çº¢é»‘æ ‘ä»£æ›¿é“¾è¡¨ï¼ŒåŠ å¿«æœç´¢ï¼‰
3. å†å“ˆå¸Œæ³•
4. å»ºç«‹ä¸€ä¸ªå…¬å…±æº¢å‡ºåŒº
```
[xorshift](http://csuncle.com/2018/08/03/æ¢…æ£®æ—‹è½¬å®‰å…¨æ€§åˆ†æåŠæ”¹è¿›/)



çº¢é»‘æ ‘æ’å…¥ï¼Œæ ¹æ®hashå€¼ï¼Œæ‰¾èŠ‚ç‚¹ï¼Œè‹¥æ²¡æ‰¾åˆ°ï¼Œæ‰¾åˆ°å¶å­èŠ‚ç‚¹


#### HashTable
å¼€æ”¾åœ°å€æ³•è§£å†³Hashå†²çª

```
            +----------------------------------------------------------------------------------+
            |Hashtable:Dictionary,Map                                                          |
            |   put(K, V):V                count:int                table:HashtableEntry<?,?>[]|
            |    addEntry(hash,K,V,index)  entrySet:Set<Map.Entry>  threshold:int              |
            |   rehash()                   keySet:Set               values:Collection<V>       |
            |                              loadFactor:float                                    |
            |                              modCount:int                                        |
            |                                                                                  |
            |                                                                                  |
            +----------------------------------------------------------------------------------+


```
åˆå§‹å®¹é‡ é»˜è®¤11ï¼ŒåŠ è½½å› å­0.75ï¼Œï¼ˆAndroid é¦–æ¬¡Mapé˜ˆå€¼å’Œtableå®¹é‡ä¸€æ ·ï¼‰//é»˜è®¤åˆå§‹åŒ–tabé•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¿è¯åˆ†æ•£åˆ†å¸ƒåˆ°tabçš„ä½ç½®
æ‰©å®¹å¢é‡  2å€+1ï¼Œä¿è¯å¥‡æ•°ï¼Œæœ‰å¯èƒ½æ˜¯è´¨æ•°//è´¨æ•°ï¼Œå¥‡æ•° hashçš„å€¼åœ¨tabä¸Šæ›´åˆ†æ•£ index = (hash & 0x7FFFFFFF) % tab.length

```java

int newCapacity = (oldCapacity << 1) + 1;

    class HashTableEntry{
        public int hashCode() {
            return hash ^ Objects.hashCode(value);//å‡å°‘keyçš„hashè®¡ç®—
        }
    }
```


#### LinkedHashMap

LinkedHashMapèŠ‚ç‚¹ç±» LinkedHashMapEntry åŒ…å« before, after;
HashMapèŠ‚ç‚¹ç±» Node åŒ…å¥½ next;
```
            +----------------------------------------------------------------------------------+
            |                      LinkedHashMap:HashMap, MapbleMap                            | 
            |                          head:LinkedHashMapEntry<K,V>                            | 
            |                          tail:LinkedHashMapEntry<K,V>                            |
            |                          accessOrder:boolean                                     |
            |                                                                                  |   
            +----------------------------------------------------------------------------------+
            |         TreeNode: LinkedHashMap.LinkedHashMapEntry                               |
            |            parent;TreeNode                                                       |
            |            left;  TreeNode                                                       |
            |            right; TreeNode                                                       |
            |            prev;  TreeNode                                                       |
            |            red;   boolean                                                        |
            |                                                                                  |
            |                                                                                  |
            |                                                                                  |
            |                                                                                  |
            +----------------------------------------------------------------------------------+


```
åˆå§‹å®¹é‡ï¼ˆç»§æ‰¿Hashmapï¼‰  16
åŠ è½½å› å­ï¼ˆ0.0~1.0ï¼‰  0.75f
æ‰©å®¹å¢é‡ï¼ˆæ‰©å®¹hashè¡¨ï¼‰  ä¸€å€
```

newCap = oldCap << 1
```



#### TreeMap
ï¼Ÿçˆ¶çº¢ï¼Œæ—‹è½¬ï¼Œé»‘è‰²å­èŠ‚ç‚¹æ•°é‡ä¸å˜
ï¼Ÿçˆ¶é»‘å­çº¢ï¼Œæ¢çº¢è‰²ï¼Œéœ€è¦æ—‹è½¬æ‰èƒ½ä¿è¯é»‘è‰²å­èŠ‚ç‚¹æ•°é‡ä¸å˜
```java
            +----------------------------------------------------------------------------------+
            |                      TreeMap:AbstractMap,NavigableMap                            |
            |                                                                                  |
            |  descendingMap:NavigableMap<K,V>                   AbstractMap                   |
            |   size:int                                            values :Collection<V>      |
            |   root:TreeMapEntry<K,V>                              keySet :Set<K>             |
            |     comparator:Comparator<? super K>                                             |
            |                                                                                  |
            |  entrySet:EntrySet                                                               |
            |  navigableKeySet: KeySet<K>                                                      |
            |   modCount:int                                                                   |
            |                                                                                  |
            +----------------------------------------------------------------------------------+
            |    TreeMapEntryvK,Vv : Map.EntryvK,Vv                                            |
            |         K key;                                                                   |
            |         V value;                                                                 |
            |         left:  TreeMapEntry                                                      |
            |         right: TreeMapEntry                                                      |
            |         parent:TreeMapEntry                                                      |
            |         color:  boolean= BLACK                                                   |
            +----------------------------------------------------------------------------------+

```
â¤· ä¸å¹³è¡¡ç‚¹
ğŸ”´ çº¢è‰²
ğŸ…Ÿçˆ¶èŠ‚ç‚¹
ğŸ… å”èŠ‚ç‚¹
ğŸ…–ç¥–çˆ¶
ğŸ… å½“å‰èŠ‚ç‚¹
ğŸ…‘ å…„å¼ŸèŠ‚ç‚¹
ğŸ… è¿‘ä¾„èŠ‚ç‚¹
ğŸ…œ è¿œä¾„èŠ‚ç‚¹
ğŸ…’ ç¬¬ä¸€å­èŠ‚ç‚¹
ğŸ…“ ç¬¬äºŒå­èŠ‚ç‚¹
fixAfterInsertion/fixAfterDeletionåˆ é™¤å¦‚æœé»‘è‰²éœ€è¦å¹³è¡¡
 æ’å…¥é»˜è®¤çº¢è‰²ï¼Œå¦‚æœçˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²éœ€è¦å¹³è¡¡ã€‚ï¼ˆè§£æï¼šä¸å…è®¸ä¸¤ä¸ªå­çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œéœ€è¦å¹³è¡¡ï¼‰
 åˆ é™¤èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œä¸”**æ›¿æ¢**åˆ é™¤èŠ‚ç‚¹ä½ç½®çš„**èŠ‚ç‚¹æ˜¯é»‘è‰²**ï¼Œéœ€è¦å¹³è¡¡æ“ä½œï¼ˆè§£æï¼šæ›¿æ¢èŠ‚ç‚¹çš„åˆ†æ”¯å°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œæ ¹èŠ‚ç‚¹åˆ°æ¯ä¸ªå¶èŠ‚ç‚¹çš„é»‘è‰²èŠ‚ç‚¹ä¸ä¸€æ ·äº†ï¼Œéœ€è¦æ”¹å¹³è¡¡ï¼‰

- fixAfterInsertionï¼šçº¢é»‘æ ‘å¹³è¡¡è°ƒæ•´ï¼ˆå¾ªç¯æ¡ä»¶ï¼šéç©ºï¼Œéè·ŸèŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹éçº¢è‰²ï¼‰ï¼ˆä¸å…è®¸nullèŠ‚ç‚¹ã€‚å…ˆæŸ¥æ‰¾èŠ‚ç‚¹æ›¿æ¢ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å˜çº¢æ’å…¥å†å¹³è¡¡ï¼‰:
å”çˆ¶çº¢è‰²
    1. ç¥–çˆ¶å”ä¸‰è§’å˜è‰²ï¼ˆçˆ¶å”é»‘ï¼Œç¥–çº¢ï¼Œçˆ¶å”çº¢è‰²ä¼ é€’åˆ°ç¥–çˆ¶ï¼›å¹¶ä»¥ç¥–çˆ¶èŠ‚ç‚¹ç»§ç»­å¹³è¡¡ï¼› è§£æï¼šä¸å¹³è¡¡åŸå› ï¼Œçº¢è‰²ç›¸é‚»ï¼›å¹³è¡¡å¤„ç†ï¼Œçº¢è‰²å‘ä¸Šä¼ é€’ï¼‰
    2. ç¥–èŠ‚ç‚¹ç»§ç»­è½¬æ¢
```
               ğŸ…–                   ğŸ”´ 
             ğŸ”´  ğŸ”´            ğŸ…Ÿ      ğŸ…       
          â¤·ğŸ”´         â‡¢    â¤·ğŸ”´  
                            
```

å”çˆ¶é»‘è‰²ï¼Œ
    1. ç¥–çˆ¶å­èŠ‚ç‚¹ä¸æ˜¯ç›´çº¿ï¼ˆå¦åˆ™è¿›è¡Œæ­¥éª¤2ï¼‰ï¼Œå¾€å­çˆ¶ç›´çº¿æ–¹å‘ï¼Œçˆ¶èŠ‚ç‚¹è½¬æ¢ã€‚ä»¥è½¬æ¢åçš„çˆ¶èŠ‚ç‚¹ï¼Œç»§ç»­æ­¥éª¤2ã€‚ï¼ˆè§£æï¼šç›´çº¿åŸå› ï¼Œåç»­æ—‹è½¬åï¼Œé¿å…çº¢è‰²èŠ‚ç‚¹å†æ¬¡ç›¸è¿ï¼‰
```
                 ğŸ…–                 ğŸ…– 
             ğŸ”´     ğŸ…           ğŸ”´      ğŸ…       
          ğŸ…‘   â¤·ğŸ”´a     â‡¢   â¤·ğŸ”´p       
                            ğŸ…‘
```


    2. å˜çˆ¶ç¥–ä¸¤è‰²ï¼ˆçˆ¶é»‘ç¥–çº¢ï¼‰ï¼Œçˆ¶ç¥–èŠ‚ç‚¹æ–¹å‘ï¼Œç¥–èŠ‚ç‚¹æ—‹è½¬ã€‚ï¼ˆè§£æï¼šçº¢è‰²å‘ä¸Šä¼ é€’ï¼Œå¹¶æ—‹è½¬ï¼Œåˆ†æ”¯åˆ°å¶èŠ‚ç‚¹çš„é»‘è‰²èŠ‚ç‚¹æ•°ä¸å˜ï¼‰

```
               ğŸ…–                  ğŸ…Ÿ 
             ğŸ”´   ğŸ…          â¤·ğŸ”´       ğŸ”´      
          â¤·ğŸ”´  ğŸ…‘     â‡¢              ğŸ…‘    ğŸ…      
                            
```

    3. ç»§ç»­æ­¥éª¤1ï¼Œç›´åˆ°æ ¹èŠ‚ç‚¹æˆ–çˆ¶èŠ‚ç‚¹ä¸æ˜¯çº¢è‰²ï¼ˆè§£æï¼šå½“å‰å­èŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œçˆ¶èŠ‚ç‚¹ä¹Ÿçº¢è‰²ï¼Œåˆ™éœ€è¦å¹³è¡¡æ“ä½œï¼‰
å¹³è¡¡åæ ¹èŠ‚ç‚¹è®¾ç½®ä¸ºé»‘è‰²hong


- åˆ é™¤ï¼ˆæ¦‚å¿µï¼šå‰é©±èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹ï¼Œæ›¿æ¢èŠ‚ç‚¹ï¼‰ï¼ˆè§£æï¼šåˆ é™¤é»‘è‰²å¶å­èŠ‚ç‚¹ï¼›åˆ é™¤èŠ‚ç‚¹æœ‰ä¸€ä¸ªæ˜¯é»‘è‰²å­èŠ‚ç‚¹ã€‚è¿™ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´å½“å‰åˆ†æ”¯å°‘ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›éœ€è¦æ‰¾åˆ°ä¸€ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼Œæ¶‚é»‘ï¼‰
  æ¦‚å¿µï¼šå­èŠ‚ç‚¹ï¼Œå°‘ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹åˆ†æ”¯çš„ä¸å¹³è¡¡èŠ‚ç‚¹ï¼›å…„ï¼Œçˆ¶ï¼Œè¿‘ä¾„ï¼Œè¿œä¾„éƒ½æ˜¯æ ¹æ®å®šä¹‰çš„å­èŠ‚ç‚¹çš„æœ€æ–°çŠ¶æ€ç›¸å¯¹ä½ç½®èŠ‚ç‚¹ã€‚
    1. å¦‚æœåˆ é™¤èŠ‚ç‚¹æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚æ‰¾åˆ°å‰é©±èŠ‚ç‚¹ï¼ˆå³èŠ‚ç‚¹çš„æœ€å°å­èŠ‚ç‚¹ï¼‰ï¼Œå‰é©±èŠ‚ç‚¹çš„æ•°æ®å¤åˆ¶åˆ°åˆ é™¤èŠ‚ç‚¹ï¼Œè½¬è€Œå‰é©±èŠ‚ç‚¹ä½œä¸ºåˆ é™¤èŠ‚ç‚¹ã€‚æ­¥éª¤3ï¼ˆè§£æï¼šé è¿‘å¶å­èŠ‚ç‚¹ï¼Œåˆ é™¤æ¯”è¾ƒå¥½å¹³è¡¡ï¼›æƒ…å†µå¦‚ä¸‹ï¼Œé»‘è‰²å°‘ä¸€ä¸ªæˆ–çº¢è‰²æ— å½±å“ï¼‰
    2. å¦‚æœä¸€ä¸ªå­èŠ‚ç‚¹æˆ–é›¶ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰§è¡Œæ­¥éª¤3
    3. ç”¨å·¦å³å­èŠ‚ç‚¹ä½œä¸ºæ›¿æ¢èŠ‚ç‚¹ï¼Œæ›¿æ¢åˆ é™¤èŠ‚ç‚¹ã€‚
    4. å¦‚æœåˆ é™¤èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œéœ€è¦å¯¹æ›¿æ¢èŠ‚ç‚¹åšå¹³è¡¡æ“ä½œï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹ä¸”åˆ é™¤èŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œéœ€è¦å…ˆå¹³è¡¡åœ¨unlinkï¼‰
fixAfterDeletionåˆ é™¤å¹³è¡¡ï¼ˆå¾ªç¯æ¡ä»¶ï¼šä¸æ˜¯æ ¹èŠ‚ç‚¹å¹¶ä¸”å½“å‰æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼‰ï¼ˆè§£æï¼šå¦‚æœåˆ é™¤å’Œæ›¿æ¢å¶èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ™åˆ†æ”¯å°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›æˆ–æ— å­èŠ‚ç‚¹ï¼Œåˆ é™¤é»‘è‰²èŠ‚ç‚¹ï¼Œå¯¼è‡´å°‘ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼‰
    1. å…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œçˆ¶çº¢å…„é»‘ï¼Œå…„çˆ¶æ–¹å‘æ—‹è½¬çˆ¶èŠ‚ç‚¹ã€‚é‡æ–°è®¾ç½®å…„å¼ŸèŠ‚ç‚¹ï¼ˆè§£æï¼šè½¬åŒ–ç¼ºå°‘é»‘èŠ‚ç‚¹çš„åˆ†æ”¯ä¸ºçº¢è‰²ï¼Œä¸ºäº†åç»­æ¶‚é»‘å¢åŠ é»‘è‰²èŠ‚ç‚¹ã€‚è½¬åŒ–çˆ¶å…„é¢œè‰²ï¼Œé€šè¿‡æ—‹è½¬ï¼Œå„åˆ†æ”¯é»‘è‰²èŠ‚ç‚¹æ•°ä¸å˜ï¼‰
```
               ğŸ…Ÿ                   ğŸ…‘
          â¤·ğŸ…      ğŸ”´  â‡¢       ğŸ”´      
                            â¤·ğŸ…
```

    1. å…„å¼ŸèŠ‚ç‚¹å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ï¼Œå…„å¼ŸèŠ‚ç‚¹å˜çº¢è‰²ã€‚ä»¥çˆ¶èŠ‚ç‚¹ä½œä¸ºæ–°èŠ‚ç‚¹ï¼Œå¹¶é‡å¤æ­¥éª¤1ã€‚å¦æ­¥éª¤3ï¼ˆè§£æï¼šçº¢è‰²èŠ‚ç‚¹å‘ä¸Šä¼ é€’ï¼Œå·¦å³èŠ‚ç‚¹éƒ½å°‘äº†é»‘è‰²èŠ‚ç‚¹ï¼Œå³çˆ¶èŠ‚ç‚¹å°‘äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦ç»§ç»­ä¸‹ä¸ªå¾ªç¯ï¼‰

```
                ğŸ…Ÿ/ğŸ”´             â¤·ğŸ…Ÿ/ğŸ”´
           â¤·ğŸ…      ğŸ…‘     â‡¢   ğŸ…      ğŸ”´  
                  ğŸ…’  ğŸ…“              ğŸ…  ğŸ…œ 
```
    1. **è·ç¦»è¿œçš„ä¾„èŠ‚ç‚¹**æ˜¯é»‘è‰²ï¼Œå˜å…„çº¢è¿‘ä¾„é»‘ï¼Œä¸”æŒ‰ç…§ä¾„å…„æ–¹å‘æ—‹è½¬å…„å¼ŸèŠ‚ç‚¹ã€‚é‡æ–°è®¾ç½®å…„èŠ‚ç‚¹ã€‚åˆ°3.2ï¼ˆè§£æï¼šå˜è‰²åï¼Œè¿‘ä¾„é»‘è‰²æ•°ä¸å˜ï¼Œè¿œä¾„å¤šäº†å°‘äº†ä¸€ä¸ªï¼Œé€šè¿‡æ—‹è½¬å¹³è¡¡æ•°é‡ï¼›ï¼‰
```
                ğŸ…Ÿ/ğŸ”´              ğŸ…Ÿ/ğŸ”´                 
           â¤·ğŸ…      ğŸ…‘     â‡¢     â¤·ğŸ…     ğŸ…’  â‡¢        ï¼ˆ3.2ï¼‰ 
                  ğŸ”´ ğŸ…œ                    ğŸ”´       
                                             ğŸ…œ
```
    3.2 å…„å¤‡ä»½çˆ¶èŠ‚ç‚¹é¢œè‰²ï¼Œçˆ¶å’Œè¿œä¾„å˜é»‘ï¼Œä¾„çˆ¶æ–¹å‘æ—‹è½¬ã€‚æ ¹èŠ‚ç‚¹èµ‹å€¼ç»™å½“å‰èŠ‚ç‚¹ï¼Œè·³å‡ºå¾ªç¯ï¼ˆè§£æï¼šå½“å‰å…„é»‘è¿œä¾„çº¢ï¼Œå¯¹è°ƒå…„çˆ¶é¢œè‰²ï¼Œæ—‹è½¬å¢åŠ å­èŠ‚ç‚¹é»‘è‰²ï¼›æ—‹è½¬åå…„å°‘äº†é»‘è‰²èŠ‚ç‚¹ï¼Œå½“å‰å…„ä¸ºçº¢è‰²ï¼Œå˜é»‘èŠ‚ç‚¹ï¼Œï¼‰
```
                ğŸ…Ÿ/ğŸ”´                 ğŸ…‘/ğŸ”´
            â¤·ğŸ…      ğŸ…‘     â‡¢      ğŸ…Ÿ      ğŸ…œ      
                  ğŸ…   ğŸ”´        ğŸ…  ğŸ…’               
```                                            


    è·³å‡ºå¾ªç¯ï¼Œè®¾ç½®xä¸ºé»‘è‰²


```java
    private void fixAfterInsertion(TreeMapEntry<K,V> x) {
        x.color = RED;

        while (x != null && x != root && x.parent.color == RED) {
            if (parentOf(x) == leftOf(parentOf(parentOf(x)))) {
                TreeMapEntry<K,V> y = rightOf(parentOf(parentOf(x)));
                if (colorOf(y) == RED) {
                    setColor(parentOf(x), BLACK);
                    setColor(y, BLACK);
                    setColor(parentOf(parentOf(x)), RED);
                    x = parentOf(parentOf(x));
                } else {
                    if (x == rightOf(parentOf(x))) {
                        x = parentOf(x);
                        rotateLeft(x);
                    }
                    setColor(parentOf(x), BLACK);
                    setColor(parentOf(parentOf(x)), RED);
                    rotateRight(parentOf(parentOf(x)));
                }
            } else {
                TreeMapEntry<K,V> y = leftOf(parentOf(parentOf(x)));
                if (colorOf(y) == RED) {
                    setColor(parentOf(x), BLACK);
                    setColor(y, BLACK);
                    setColor(parentOf(parentOf(x)), RED);
                    x = parentOf(parentOf(x));
                } else {
                    if (x == leftOf(parentOf(x))) {
                        x = parentOf(x);
                        rotateRight(x);
                    }
                    setColor(parentOf(x), BLACK);
                    setColor(parentOf(parentOf(x)), RED);
                    rotateLeft(parentOf(parentOf(x)));
                }
            }
        }
        root.color = BLACK;
    }
```
äºŒå‰æ ‘æœç´¢

Charset#availableCharsets():SortedMap
#### HashSet
```
            +----------------------------------------------------------------------------------+
            |                      HashSet: AbstractSet, Set                                    |
            |                               map :HashMap<E,Object>                             |
            +----------------------------------------------------------------------------------+

```
#### TreeSet
```



            +----------------------------------------------------------------------------------+
            |                      TreeSet: AbstractSet,NavigableSet                           |
            |                                                                                  |
            |                               m:NavigableMap<E,Object>                           |
            |                                                                                  |
            +----------------------------------------------------------------------------------+

```

#### SparseArray
dirty flagæ¨¡å¼

removeæ—¶å€™ï¼Œè®¾ç½®ä¸ºtrue
æ’å…¥ï¼Œç´¢å¼•ï¼ŒæŸ¥æ‰¾ï¼Œsize

intä¸ç”¨è®¡ç®—hashæ•ˆç‡é«˜
#### ArrayMap
cacheæ¨¡å¼
ç¼“å­˜é•¿åº¦ä¸º8ï¼Œ16æ•°ç»„
ç¼“å­˜arrayamp


## æ¯”ç‰¹ä¸²/å­—èŠ‚æ•°ç»„ç»“æ„ï¼ˆäºŒè¿›åˆ¶ç¼–ç ï¼‰
### åŸºæœ¬æ•°æ®ç±»å‹ä¸å­—èŠ‚ï¼ˆå›ºå®šé•¿åº¦äºŒè¿›åˆ¶ä»£è¡¨æ•°æ®ç±»å‹ï¼‰

boolean,byte,char,short,int,long,float,double

åˆ›å»ºå¯¹è±¡
    ç®€å•å·¥å‚ valueof

- Char
  jdk 9é‡‡ç”¨å‹ç¼©å­—ç¬¦ä¸²ï¼ŒIso-8891ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œå¦åˆ™ç”¨ UTF-16 ç¼–ç ã€‚


#### æµ®ç‚¹å‹ IEEE-754æ ¼å¼æ ‡å‡†
Float
```
ç¬¬ä¸€æ­¥ï¼š[176.0625æ¢æˆäºŒè¿›åˆ¶æ•°](https://blog.csdn.net/k346k346/article/details/50487127)ï¼Œ
        æ•´æ•°éƒ¨åˆ†é‡‡ç”¨"é™¤2å–ä½™ï¼Œé€†åºæ’åˆ—"æ³•ï¼š
        å°æ•°ç‚¹å‰:176 / 2 = 88  
        ä½™æ•°ä¸º 088 / 2=44 ä½™æ•°ä¸º 0                             
        44 / 2 =22    ä½™æ•°ä¸º 0                       
        22 / 2= 11    ä½™æ•°ä¸º 0                              
        11 / 2 =5     ä½™æ•°ä¸º 1        
        5 / 2=2       ä½™æ•°ä¸º 1                             
        2/ 2  =1      ä½™æ•°ä¸º 0                                                                             
        1/ 2=0        ä½™æ•°ä¸º 1    å•†ä¸º0ï¼Œç»“æŸã€‚                                                                       
        å°æ•°ç‚¹å‰æ•´æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶:10110000    
        ---------------------  
        
        å°æ•°éƒ¨åˆ†é‡‡ç”¨ "ä¹˜2å–æ•´ï¼Œé¡ºåºæ’åˆ—"æ³•éƒ¨åˆ†ï¼š
        0.0625 * 2 = 0.125   æ•´æ•°ä¸º0                 
        0.125 * 2 = 0.25     æ•´æ•°ä¸º0             
        0.25* 2 = 0.50       æ•´æ•°ä¸º0             
        0.5* 2 = 1.0         æ•´æ•°ä¸º1ï¼Œå°æ•°éƒ¨åˆ†ä¸º0,ç»“æŸ
        å°æ•°ç‚¹åæ•´æ•°è½¬æ¢ä¸ºäºŒè¿›åˆ¶:0001 

        å¾—åˆ°äºŒè¿›åˆ¶ä½ï¼š10110000.0001

ç¬¬äºŒæ­¥ï¼šåœ¨æ¢ç®—æˆå†…å­˜æ ¼å¼ï¼ˆIEEE-754æ ¼å¼æ ‡å‡†ï¼‰  SEEEEEEE    EMMMMMMM    MMMMMMMM    MMMMMMMM
      S 0æ­£æ•°ï¼Œ1è´Ÿæ•°
      E ç¬¬ä¸€ä½ï¼ˆ1ï¼šå¤§äº1çš„åè¿›åˆ¶ï¼Œ0ï¼š0~1ä¹‹é—´çš„åè¿›åˆ¶ï¼‰ï¼Œç¬¬2åˆ°8ä½ï¼ˆå‡æ³•åçš„å€¼ï¼š [å 1ä½ï¼›å°æ•°ç‚¹ç§»ä½è‡³åˆ°ä¸ªä½1.è‹¥å³ç§»0ï¼Œå¦åˆ™1][å 7ä½ï¼Œå°æ•°ç‚¹ç§»ä½çš„äºŒè¿›åˆ¶] âˆ’1ï¼‰
      M å°æ•°ç‚¹ç§»ä½åˆ°ä¸ªä½1åï¼Œæˆªå–åé¢23äºŒè¿›åˆ¶
      å³ 0 10000110 0110000 00010000 00000000

```
-Float.MAX_VALUE ~ Float.MAX_VALUE
=[-3.40282346638528860e+38 , -1.40129846432481707e-45] âˆª [1.40129846432481707e-45 ~ 3.40282346638528860e+38]
æ­£è´Ÿæ˜¯å¯¹ç§°çš„ï¼Œçœ‹ä¸‹æ­£æ•°éƒ¨åˆ†
Float.MIN_VALUE ~ Float.MAX_VALUE
=2^(-126) ~~ 2(1-2^(-24)) * 2^(2^7-1)
=2^(-126) ~~ 2(1-2^(-24)) * 2^(127)
=1.1754943508223e-38 ~ 3.4e+38
= ï¼ˆå·²çŸ¥e-24ä½ æ¶…æ§ƒå¯‚é™ï¼Œæš‚æ—¶æ‰¾ä¸åˆ°å¯ä»¥è¡¡é‡çš„è®¡æ•°å•ä½ï¼‰ ~ 3.4*(10^38)(è®¡æ•°å•ä½çº¦ç­‰äº34æ¶§)

- Double
å†…å­˜é‡Œçš„å­˜å‚¨ç»“æ„ï¼ˆIEEE-754æ ¼å¼æ ‡å‡†ï¼‰ï¼šSEEE EEEE EEEE MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM MMMM
æ­£æ•°èŒƒå›´ï¼š
2^(-1022-52) ~~ 2-2^-52)*(2^((2^10)-1))
#### æ—¶é—´æˆ³å°è£… - æ—¥æœŸDate/Canadar
è£…é¥° longæ—¶é—´æˆ³
æ‡’åŠ è½½ 

Calendar.HOUR åœ†ç›˜æ—¶é’Ÿ 1~12ï¼Œå‡Œæ™¨0ç‚¹å³æ—©ä¸Š12ç‚¹ï¼Œä¸­åˆ12ç‚¹å³ä¸‹åˆ12ç‚¹
Calendar.HOUR_OF_DAY æ•°å­—æ‰‹è¡¨0~23

####  å­—ç¬¦ä¸²ç»“æ„åŠå­—ç¬¦ç¼–ç 

æ•°æ®ä¸äºŒè¿›åˆ¶
- å­—é•¿
  [å­—é•¿](http://www.cnblogs.com/chakyu/p/7405275.html)
  [è¿›åˆ¶è½¬åŒ–](https://www.branah.com/ascii-converter)
- å­—èŠ‚ï¼Œç¼–ç ï¼Œå­—ç¬¦é›† 
sun.jnu.encodingæ˜¯æŒ‡æ“ä½œç³»ç»Ÿçš„é»˜è®¤ç¼–ç ï¼Œ
file.encodingæ˜¯æŒ‡JAVAæ–‡ä»¶çš„ç¼–ç 
```java
javac -encoding utf-8 TextFileEncoding.java  //å¿…é¡»è®¾ç½®å’Œæ–‡ä»¶ç¼–ç ä¸€ç›´çš„ç¼–ç 

java -Dfile.encoding=utf-8 TextFileEncoding

```
[java -h ç›¸å…³å¯åŠ¨å‚æ•°å¸®åŠ©æ–‡æ¡£](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)

ã€ŠThe UnicodeÂ® Standard Version 9.0 ã€‹
BCD->ASCIIï¼ˆ128ï¼‰->ISO/IEC8859-1ï¼Œåˆç§°Latin-1ï¼ˆ256ï¼‰->Unicode(1_114_112)
```
                            256
                   128
              16
            +------+---------+------------+
        16  | 128  |         |            |
            | 0xf  |         |            |
            +------+         |            |
            |       256      |            |
    128     |      0xff      |            |
256         +----------------+            |
            |               65536         |Redundancy
            |               0xffff        |
            |                             |
            +-----------------------------+
 
       +--------------------------------+ colomns 256  +--------------------------------+

 +    +---------------------------------------------------------------------------------+    +
 |    |             ascii                 |                   latin1                    |BMP |
 |    +---------------------------------------------------------------------------------+    |
 |    |                                                                           .     |    +
 |    |                                                                           .     |   rows 256
 |    |                                                                           .     |    +
 |    +---------------------------------------------------------------------------------+    +
 |                                                                                       SMP
 |                                           .                                           SIP  
                                             .
planes 0x10                                  .                                           SSP
 +                                                                                       SPUA-A
 |    +---------------------------------------------------------------------------------+
 |    |                                                                                 |SPUA-B
 |    |                                                                                 |
 +    +---------------------------------------------------------------------------------+
 
1å­—èŠ‚ 0xxxxxxx 
2å­—èŠ‚ 110xxxxx 10xxxxxx 
3å­—èŠ‚ 1110xxxx 10xxxxxx 10xxxxxx 
4å­—èŠ‚ 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx 
5å­—èŠ‚ 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 
6å­—èŠ‚ 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 
```
[unicode åŠä½ç½®](https://unicode-table.com/en/#control-character)
 [emojiä½ç½®](https://unicode-table.com/en/#emoticons)  80ä¸ªå­—ç¬¦(1F600â€” 1F64F)
UCS-4 ç¬¬1ä¸ªå­—èŠ‚2^7=128ä¸ªgroupï¼Œç¬¬2ä¸ªå­—èŠ‚2^8=256ä¸ªå¹³é¢ï¼ˆplaneï¼‰,ç¬¬3ä¸ªå­—èŠ‚åˆ†ä¸º256è¡Œ ï¼ˆrowï¼‰ï¼Œç¬¬4ä¸ªå­—èŠ‚ä»£è¡¨æ¯è¡Œæœ‰256ä¸ªç ä½ï¼ˆcellï¼‰
unicode æœ‰0x10FFFFä¸ªcellï¼Œåˆ†ä¸º 17å¹³é¢ï¼Œ(2^8=256)è¡Œï¼Œ(2^8=256)å•å…ƒ
 
- æ¶‰åŠç±»
  1. [Character.UnicodeBlock](https://en.wikipedia.org/wiki/Unicode_block)
- [Unicodeä¸UTF-8è½¬åŒ–](https://zh.wikipedia.org/wiki/UTF-8)
- [UTF-16](https://en.wikipedia.org/wiki/UTF-16) 
  UTF-16ç¼–ç ï¼ˆäºŒè¿›åˆ¶ï¼‰å°±æ˜¯ï¼šxxxxxxxx xxxxxxxxï¼ˆ0åŒºï¼‰
  æˆ–110110yy yyyyyyyy 110111xx xxxxxxxxï¼ˆè¶…è¿‡ä¸‰ä¸ªå­—èŠ‚ Unicode ç”¨å››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ï¼‰
  
```java
  System.out.println("a".getBytes(StandardCharsets.UTF_16).length);//ç»“æœä¸º4ï¼Œæ˜¯å› ä¸ºåŠ ä¸ŠBOM(å­—èŠ‚é¡ºåºæ ‡è®°(ByteOrderMark))å¤§ç«¯åºï¼Œç”¨FEFFè¡¨ç¤ºï¼ŒFEFFå ç”¨ä¸¤ä¸ªå­—èŠ‚ã€‚
```

  BOMå¤§ç«¯ï¼Œé«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜åœ°å€çš„ä½ä½åœ°å€

```
    0x CC AA 88 66

   Big-Endian
   +--------+--------+-------+--------+
   |  CC    |  AA    |  88   |  66    |
   |        |        |       |        |
   +--------+--------+-------+--------+

   Little-Endian
   +--------+--------+-------+--------+
   |  66    |  88    |  AA   |  CC    |
   |        |        |       |        |
   +--------+--------+-------+--------+
```
##### å­—ç¬¦ä¸²-å­—ç¬¦æ•°ç»„
stringbuilder 
```
+----------------------------------------------------------------------------+
|                 StringBuilder                StringBuffer                  |
|                                                                            |
+----------------------------------------------------------------------------+
|                                                                            |
|                      AbstractStringBuilder                                 |
|                            value:char[]                                    |
|                            count:int                                       |
|                                                                            |
+----------------------------------------------------------------------------+


```
åˆå§‹ é»˜è®¤16
æ‰©å®¹ æ’å…¥æ—¶ï¼ŒæœŸæœ›æ•°ç»„é•¿åº¦å¤§äºvalueæ•°ç»„é•¿åº¦ï¼Œ(value.length << 1) + 2ï¼Œå¦‚æœä¸å¤Ÿç›´æ¥ç”¨æœŸæœ›æ•°ç»„é•¿åº¦ã€‚[(value.length << 1) + 2](https://stackoverflow.com/questions/45094521/java-stringbuilderstringbuffers-ensurecapacity-why-is-it-doubled-and-incre)
    ï¼ˆä¿è¯åˆå§‹åŒ–é•¿åº¦ä¸º0ï¼Œä¹Ÿèƒ½æ‰©å®¹ã€‚å¹¶ä¸”å¯èƒ½JVMå†…å­˜ç»“æ„æœ‰å…³ï¼Œä¸è€ƒè™‘markwordå’Œclazzï¼Œæ•°ç»„é•¿åº¦ 4byte+ï¼ˆ16*2+2)*2byte(char) æœ‰æ¦‚ç‡èƒ½è¢«8æ•´é™¤ï¼Œå†…å­˜å¯¹é½ï¼‰
Arrays.copyof æ‰©å®¹ç©ºé—´ï¼Œæ‹·è´æºæ•°ç»„
System.arraycopy æ‹·è´åˆ°æ–°æ•°æ® 
```
+---------------+----------+----------+
|               |  final   |  synchro |
+-------------------------------------+
| String        |   âˆš      |          |
+-------------------------------------+
| StringBuffer  | char[]   |    âˆš     |
+-------------------------------------+
| StringBuilder | char[]   |    x     |
+---------------+----------+----------+

```

#### æŒ‡ä»¤ - è¿ç®—ç¬¦ï¼ˆç®—æœ¯ï¼Œä½è¿ç®—ï¼Œèµ‹å€¼ï¼Œæ¯”è¾ƒï¼Œé€»è¾‘ï¼‰
Byteé€šè¿‡åŠ æ³•å®ç°åŠ å‡ï¼Œç§»ä½å’ŒåŠ æ³•å®ç°ä¹˜é™¤æ³•

- åŸç ï¼Œåç ï¼Œè¡¥ç 
  æ­£æ•°ï¼šåŸç ï¼Œåç ï¼Œè¡¥ç ä¸€è‡´
  è´Ÿæ•°ï¼šåç ç¬¦å·ä½ä¸å˜å…¶ä»–ä½æŒ‰ä½å–åï¼Œè¡¥ç ä¸ºåç åŠ 1ï¼ˆå–ååŠ ä¸€ï¼Œä¸¤ä¸ªè¿‡ç¨‹ç¬¦å·ä½éƒ½ä¸å˜ï¼‰
```
æˆ–è€…æ¢æˆæ—¶é’Ÿï¼Œ0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5ï¼Œ-6ï¼Œ-1ï¼Œ-2ï¼Œ-3ï¼Œ-4ï¼Œ-5
3bitæœ‰ç¬¦å·äºŒè¿›åˆ¶
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+
|        |           |           |         |        |         |          |         |        |
| Decimal|  -3       |    -2     |   -1    |  -4    |   3     | 2        | 1       |    0   |
+-------------------------------------------------------------------------------------------+
|        |           |           |         |        |         |          |         |        |
| åŸç     |  111      |    110    |  101    |  100   |  011    |  010     |  001    | 000    |
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+

è´Ÿæ•°åç ï¼Œç›¸å½“ä¸åœ¨è´Ÿæ•°èŒƒå›´æ¢ä¸‹ä½ç½®ã€‚ 
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+
|        |           |           |         |        |         |          |         |        |
| Decimal|   -4      |    -1     |   -2    |  -3    |   3     | 2        | 1       |    0   |
+-------------------------------------------------------------------------------------------+
|        |           |           |         |        |         |          |         |        |
| åç     |  111      |    110    |  101    |  100   |  011    |  010     |  001    | 000    |
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+
 
è´Ÿæ•°è¡¥ç ï¼Œæ•´ä¸ªæ•°å˜å¾—æœ‰åº
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+
|        |           |           |         |        |         |          |         |        |
| Decimal|   -1      |    -2     |   -3    |  -4    |   3     | 2        | 1       |    0   |
+-------------------------------------------------------------------------------------------+
|        |           |           |         |        |         |          |         |        |
| åç     |  111      |    110    |  101    |  100   |  011    |  010     |  001    | 000    |
+--------+-----------+-----------+---------+--------+---------+----------+---------+--------+


```
  åŸç ï¼šåŠ è´Ÿæ•°ï¼Œä¸æ˜¯é¢„æœŸå€¼ï¼ˆ1-1= 00000001^1000001ï¼ˆåŸç ï¼‰=10000010=-2ï¼‰
  åç ï¼šæ­£æ•°åŸç åŠ è´Ÿæ•°çš„åŸç ï¼Œè®¡ç®—çš„ç»“æœä¸æ˜¯æƒ³è¦çš„å€¼ï¼ˆ1-1= 00000001ï¼ˆåï¼‰^11111110ï¼ˆåç ï¼‰=11111111ï¼ˆåï¼‰=10000000ï¼ˆåŸï¼‰ï¼‰ã€‚
  è¡¥ç ï¼šæ­£æ•°åŠ è´Ÿæ•°çš„åç ï¼Œç¬¦å·ä½ä¸å¯¹ï¼Œç”¨è¡¥ç å¯ä»¥æ­£ç¡®ï¼ˆ1-1= 00000001ï¼ˆè¡¥ï¼‰^11111111(è¡¥ç )=00000000=0ï¼‰
- [è¡¥ç åŸç†ï¼šåŒä½™](https://www.cnblogs.com/baiqiantao/p/7442907.html)
  è´Ÿæ•°å–æ¨¡ï¼šA mod b= A-B*Math.floorï¼ˆA/Bï¼‰
  
  1. åç ï¼Œå®é™…ä¸Šæ˜¯è¿™ä¸ªæ•°å¯¹äºä¸€ä¸ªè†œçš„åŒä½™æ•°ï¼›è€Œè¿™ä¸ªè†œå¹¶ä¸æ˜¯æˆ‘ä»¬çš„äºŒè¿›åˆ¶ï¼Œè€Œæ˜¯æ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼
  2. åç çš„åŸºç¡€ä¸Š+1ï¼Œåªæ˜¯ç›¸å½“äºå¢åŠ äº†è†œçš„å€¼
```
byte ï¼ˆbyteèŒƒå›´ -128~127ï¼‰å–åæ±‚å€¼ï¼Œç›¸å½“äºå€¼ (a+b) mod 127
    å–è¡¥æ±‚å€¼ï¼Œç›¸å½“äºï¼ˆa+bï¼‰ mod 128ï¼Œä¿è¯ä¸ä¼šæº¢å‡º
```

- ä½è¿ç®— **& | ~ ^**
 
### Hexï¼ˆç”¨äºæ‰“å°å­—ç¬¦ï¼‰/Base16ï¼ˆç”¨äºç¼–ç æ¯”ç‰¹æµï¼‰ï¼ŒBase32
### URLï¼ˆå®‰å…¨å­—ç¬¦+éå®‰å…¨å­—ç¬¦Base16ç¼–ç ï¼‰
```java
Apache-codec
    static {
        // alpha characters
        for (int i = 'a'; i <= 'z'; i++) {
            WWW_FORM_URL_SAFE.set(i);
        }
        for (int i = 'A'; i <= 'Z'; i++) {
            WWW_FORM_URL_SAFE.set(i);
        }
        // numeric characters
        for (int i = '0'; i <= '9'; i++) {
            WWW_FORM_URL_SAFE.set(i);
        }
        // special chars
        WWW_FORM_URL_SAFE.set('-');
        WWW_FORM_URL_SAFE.set('_');
        WWW_FORM_URL_SAFE.set('.');
        WWW_FORM_URL_SAFE.set('*');
        // blank to be replaced with +
        WWW_FORM_URL_SAFE.set(' ');

        // Create a copy in case anyone (ab)uses it
        WWW_FORM_URL = (BitSet) WWW_FORM_URL_SAFE.clone();
    }
```
éå®‰å…¨å­—ç¬¦
```java
        buffer.write(ESCAPE_CHAR);
        final char hex1 = Utils.hexDigit(b >> 4);
        final char hex2 = Utils.hexDigit(b);
        buffer.write(hex1);
        buffer.write(hex2);
```
### Base64
> Base64æ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ã€‚log{2}64=6 ã€‚[](https://zh.wikipedia.org/wiki/Base64)
```java 
Apache-codec

    //1. é‚®ä»¶å†…å®¹ MINEï¼›
    //2. å›¾ç‰‡ä¼ è¾“ data:image/png;base64 ï¼›
    private static final byte[] STANDARD_ENCODE_TABLE = {
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
            'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
            'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '+', '/'
    };

    /**
     * This is a copy of the STANDARD_ENCODE_TABLE above, but with + and /
     * changed to - and _ to make the encoded Base64 results more URL-SAFE.
     * This table is only used when the Base64's mode is set to URL-SAFE.
     */
    private static final byte[] URL_SAFE_ENCODE_TABLE = {
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M',
            'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
            'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm',
            'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '-', '_'
    };
```
Simpleï¼š A-Za-z0-9+/ï¼ˆ.ç”¨æ¥å¡«å……ï¼‰
URLï¼š A-Za-z0-9+_ï¼ˆ.ç”¨æ¥å¡«å……ï¼‰
MIMEï¼š A-Za-z0-9+/ï¼ˆ=ç”¨æ¥å¡«å……ï¼‰



## ç®—æ³• - ä¸ƒå¤§ï¼ˆé€»è¾‘ç»“æ„ï¼‰æŸ¥æ‰¾
1. çº¿æ€§è¡¨æŸ¥æ‰¾ï¼š
     1. é¡ºåºæŸ¥æ‰¾ï¼ˆString.contains()ï¼Œï¼‰ï¼Œ
     2. äºŒåˆ†æ³•/æŠ˜åŠæœ‰åºæŸ¥æ‰¾ logâ‚‚(n) ï¼Œ**int mid = low+(high-low)/2;**
     3. æ’å€¼æœ‰åºæŸ¥æ‰¾ï¼šä¼˜åŒ–æŠ˜åŠæŸ¥æ‰¾ **int mid = low+(value-a[low])/(a[high]-a[low])*(high-low);**
         é€‚åˆå‡åŒ€åˆ†å¸ƒçš„æœ‰åºè¡¨ï¼Œæ—¶é—´ï¼šO(ã’â‚‚n)
     4. æ–æ³¢é‚£å¥‘æœ‰åºæŸ¥æ‰¾ï¼š å‡½æ•°ä¼°å€¼æ¬¡æ•°æœ€å°‘çš„æœ€ä¼˜æœç´¢æ–¹æ³•**int mid = low+F(k-1)-1;**

        ```java
            while (arrLength > fb[k] - 1){k++;} //åˆå§‹åŒ–kï¼Œå³æ–æ³¢é‚£å¥‘å¤§äºæ•°ç»„é•¿åº¦çš„æœ€å°å€¼
        
            int mid = low+F(k-1)-1;
            expect=arr[mid]ï¼ŒæŸ¥æ‰¾å¯¹
            expect>arr[mid]ï¼Œåˆ™low=mid+1ï¼Œk-=2ï¼›
            expect<arr[mid]ï¼Œåˆ™high=mid-1ï¼Œk-=1ã€‚
        ```
     5. å“ˆå¸Œå­˜å‚¨æŸ¥æ‰¾
         1. ä»¥ç©ºé—´æ¢æ—¶é—´ï¼Œå¤æ‚åº¦O(1)
         2. å˜å½¢ï¼šä½å›¾ï¼Œå¸ƒéš†è¿‡æ»¤         
     6. ç´¢å¼•è¡¨é¡ºåºæŸ¥æ‰¾/åˆ†å—æŸ¥æ‰¾ï¼ˆä¼˜åŒ–é¡ºåºæŸ¥æ‰¾ï¼‰

2. æ ‘å½¢æŸ¥æ‰¾ï¼š
        äºŒå‰æœç´¢æ ‘ï¼ˆAVL/çº¢é»‘æ ‘ï¼‰ï¼Œ
        å¤šå‰æ ‘ï¼ˆbæ ‘ï¼Œb+ï¼Œb*ï¼‰ï¼Œ
3. å›¾å½¢æŸ¥æ‰¾ï¼š
        æ·±åº¦ä¼˜å…ˆï¼Œå¹¿åº¦ä¼˜å…ˆ

### æ’åº
3ä¸ªç»´åº¦ï¼šæ—¶é—´å¤æ‚åº¦ï¼ˆæœ€å¥½ï¼Œå¹³å‡ï¼Œæœ€åï¼‰ï¼Œç©ºé—´å¤æ‚åº¦ï¼Œç¨³å®šæ€§
[](é—®é¢˜ä¼˜åŒ–ä¸æ€»ç»“\çŸ¥è¯†ä½“ç³»-ç†è®º-DSA.md)
[æ’åºç®—æ³•](https://en.wikipedia.org/wiki/Sorting_algorithm)

|--|--|--|--|ç©ºé—´|ç¨³å®š|~~å¤æ‚~~|
|--|--|--|--|--|--|--|
**æ¯”è¾ƒæ’åº**| | | | | | | |
å†’æ³¡äº¤æ¢|   æ²¡æœ‰äº¤æ¢O(N)|O(nÂ²)         |       |O(1)      |    ç¨³å®š|ç®€å•             
å¿«é€Ÿäº¤æ¢|               |  O(N*ã’â‚‚N)|å…¨äº¤æ¢O(nÂ²)| O(ã’â‚‚n)|   ä¸ç¨³å®š|å¤æ‚
| | | | | | | |
å½’å¹¶æ’åº|               |O(N*ã’â‚‚N)     |       |    O(n)  |   ç¨³å®š|å¤æ‚       
| | | | | | | |
æ’å…¥ï¼š  |    æ²¡æœ‰æ’å…¥O(N) |O(NÂ²)       |         |  O(1)    | ç¨³å®š|ç®€å•
å¸Œå°”ï¼š  |            O(N) |O(N^1.3)   | O(N^1.5)|  O(1)    | ä¸ç¨³å®š|å¤æ‚
| | | | | | | |
ç›´æ¥é€‰æ‹©|                 |O(NÂ²)       |        |  O(1)     | ä¸ç¨³å®š|    
å †æ’åº  |                 |   O(N*ã’â‚‚N) |       |   O(1)    |ä¸ç¨³å®š|å¤æ‚
**éæ¯”è¾ƒæ’åº**|åˆ†å¸ƒæ’åº<br>nï¼šå…³é”®å­—ä¸ªæ•°ï¼›kï¼šæ¡¶æ•°ï¼›<br>rï¼šæ¡¶é‡Œæ•°å­—èŒƒå›´ï¼›dï¼šå…³é”®å­—é•¿åº¦ï¼›<br>|||||n<<2^k
è®¡æ•°|               -   | O(n+r)|            | O(n+r)|ç¨³å®š|æ˜¯
æ¡¶|                   - |O(n+r)|            | O(n+r) |ç¨³å®š|æ˜¯
åŸºæ•°|               -   |O(n*k/d)|  |O(n+2^d)|ç¨³å®š|ä¸

**å…¶ä»–æ’åº**|å¹¶å‘æ’åºï¼Œ<br>æ··åˆæ’åº


è®¡æ•°æ’åºï¼šæ¯ä¸ªæ¡¶åªå­˜å‚¨å•ä¸€é”®å€¼ï¼›
æ¡¶æ’åºï¼šæ¯ä¸ªæ¡¶å­˜å‚¨ä¸€å®šèŒƒå›´çš„æ•°å€¼ï¼›
åŸºæ•°æ’åºï¼šæ ¹æ®é”®å€¼çš„æ¯ä½æ•°å­—æ¥åˆ†é…æ¡¶ï¼›

è®¡ç®—å¤æ‚æ€§ç†è®º
    å¸¸é‡æ—¶é—´ O(1)
    çº¿æ€§æ—¶é—´  ÎŸ(n)
    æŒ‡æ•°æ—¶é—´

1954å¹´ç”± Harold H. Seward æå‡º è®¡æ•°æ’åº


#### TimSort
Arrays.sort
https://blog.csdn.net/bryansun/article/details/105182778?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-7.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-7.nonecase

### å¹³è¡¡æ ‘

1. AVLå¹³è¡¡æ ‘
    1.1 å…¶æ ¹çš„å·¦å³å­æ ‘é«˜åº¦ä¹‹å·®çš„ç»å¯¹å€¼ä¸èƒ½è¶…è¿‡1

2. çº¢é»‘å¹³è¡¡æ ‘
    2.1 æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸æ˜¯çº¢è‰²çš„å°±æ˜¯é»‘è‰²çš„
    2.2. æ ¹æ€»æ˜¯é»‘è‰²çš„
    2.3. å¦‚æœèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒçš„å­èŠ‚ç‚¹å¿…é¡»æ˜¯é»‘è‰²çš„ï¼ˆåä¹‹ä¸ä¸€å®šæˆç«‹ï¼‰
    2.4. ä»æ ¹åˆ°å¶èŠ‚ç‚¹æˆ–ç©ºå­èŠ‚ç‚¹çš„æ¯æ¡è·¯å¾„ï¼Œå¿…é¡»åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚
### å“ˆå¸Œè¡¨å­˜å‚¨
[æ•£åˆ—è¡¨](https://zh.wikipedia.org/wiki/%E5%93%88%E5%B8%8C%E8%A1%A8)

##### å“ˆå¸Œå€¼ç”Ÿæˆå‡½æ•°
1. ç›´æ¥å®šå€æ³•ï¼šå–å…³é”®å­—æˆ–å…³é”®å­—çš„æŸä¸ªçº¿æ€§å‡½æ•°å€¼ä¸ºæ•£åˆ—åœ°å€ã€‚
2. æ•°å­—åˆ†ææ³• ï¼šå…³é”®å­—çš„è‹¥å¹²æ•°ä½ç»„æˆå“ˆå¸Œåœ°å€
3. æŠ˜å æ³•ï¼šå°†å…³é”®å­—åˆ†å‰²æˆä½æ•°ç›¸åŒçš„å‡ éƒ¨åˆ†ï¼Œå åŠ å’Œï¼ˆå»é™¤è¿›ä½ï¼‰ä½œä¸ºæ•£åˆ—åœ°å€
4. å¹³æ–¹å–ä¸­æ³•ï¼šå–å…³é”®å­—å¹³æ–¹åï¼Œæ‰©å¤§å·®å¼‚ï¼Œå–ä¸­é—´å‡ ä½ä¸ºå“ˆå¸Œåœ°å€ã€‚
5. é™¤ç•™ä½™æ•°æ³•ï¼ˆå˜ç§ï¼šä¹˜æ³•æº¢å‡ºï¼‰
6. éšæœºæ³•ï¼Œå…³é”®å­—é•¿åº¦ä¸åŒçš„åœºåˆ

- å­—ç¬¦ä¸² ï¼ˆè‡ªç„¶æº¢å‡ºæ¥ç­‰æ•ˆå–æ¨¡ï¼‰
1. æœ€ä¸»è¦çš„ï¼Œç§»ä½å’Œå‡æ³•æ¥ä»£æ›¿ä¹˜æ³•ï¼Œæº¢å‡ºä½ä½å…³é”®å­—**s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]**
2. å¥‡ç´ æ•°ï¼Œå¦‚æœä¹˜æ•°æ˜¯å¶æ•°ï¼Œå¹¶ä¸”ä¹˜æ³•æº¢å‡ºçš„è¯ï¼Œä¿¡æ¯å°±ä¼šä¸¢å¤±ï¼Œä¸2ç›¸ä¹˜ç­‰ä»·äºç§»ä½è¿ç®—ï¼ˆä½ä½è¡¥0ï¼‰ã€‚
    å¶æ•°ä¼šåœ¨ä¹˜æ³•è¿ç®—ä¸­äº§ç”Ÿæº¢å‡ºï¼Œå¯¼è‡´æ•°å€¼ä¿¡æ¯ä¸¢å¤±ã€‚
    è´¨æ•°ä¸èƒ½å¤ªå¤§ï¼Œè®¡ç®—é‡å¤§ï¼Œå°è´¨æ•°æœ‰ 2ï¼Œ3ï¼Œ5ï¼Œ7ï¼Œ11ï¼Œ13ï¼Œ19ï¼Œ17ï¼Œ23ï¼Œ29ï¼Œ31ï¼Œç»Ÿè®¡åˆ†å¸ƒæƒ…å†µ
 [ã€ŠEffective Javaã€‹ ]()
##### Hash å†²çª
 å¼€æ”¾åœ°å€æ³•ï¼ˆé—­æ•£åˆ—ï¼‰
    çº¿è¡Œæ¢æŸ¥æ³•ï¼ˆArrayMapï¼‰ã€å¹³æ–¹æ¢æŸ¥æ³•ã€åŒæ•£åˆ—å‡½æ•°æ¢æŸ¥æ³•/å†å“ˆå¸Œæ³•ã€‚
 é“¾åœ°å€æ³•ï¼ˆå¼€æ•£åˆ—HashMapï¼‰
 å»ºç«‹å…¬å…±æº¢å‡ºåŒº
 å…¶ä»–æ–¹æ³•

äº§ç”Ÿçš„å†²çªå°‘ï¼ŒæŸ¥æ‰¾æ•ˆç‡å°±é«˜ã€‚å½±å“äº§ç”Ÿå†²çªå¤šå°‘æœ‰ä»¥ä¸‹ä¸‰ä¸ªå› ç´ ï¼š
    æ•£åˆ—å‡½æ•°æ˜¯å¦å‡åŒ€ï¼›
    å¤„ç†å†²çªçš„æ–¹æ³•ï¼›
    æ•£åˆ—è¡¨çš„è½½è·å› å­ï¼ˆå¼€æ”¾å®šå€æ³•ï¼Œè·è½½å› å­æ˜¯ç‰¹åˆ«é‡è¦å› ç´ ï¼Œåº”ä¸¥æ ¼é™åˆ¶åœ¨0.7-0.8ä»¥ä¸‹ï¼‰
##### JDK 14
[experimental(intx, hashCode, 5,...)](src\hotspot\share\runtime\globals.hpp)
[get_next_hash()](src\hotspot\share\runtime\synchronizer.cpp)
[](src\hotspot\share\runtime\thread.cpp)
```java
  _hashStateX = os::random();
  _hashStateY = 842502087;
  _hashStateZ = 0x8767;    // (int)(3579807591LL & 0xffff) ;
  _hashStateW = 273326509;

```
### éšæœºæ•°
åŸºæœ¬æ•°æ®ç±»å‹ç¼“å­˜ä¸equals()ï¼ŒhashCode()ï¼ŒtoString()
ä¸€è‡´æ€§hash
SecureRandom 
BigInteger.probablePrime() è´¨æ•°
#### ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ï¼ˆPRNGï¼‰
[wiki](https://en.wikipedia.org/wiki/List_of_random_number_generators)
1946å¹´ï¼Œå†¯è¯ºä¾æ›¼å¹³æ–¹å–ä¸­æ³•ï¼šäº§ç”Ÿä¼ªéšæœºæ•°çš„æ–¹æ³•ï¼Œ
1951å¹´ï¼ŒLehmer ç”Ÿæˆå™¨ï¼ˆaXn mode mï¼‰ã€‚ åˆç§°ä¸º MLCGæˆ–MCG
1958å¹´ï¼ŒLCGï¼ˆ(aXn+c) mode mï¼‰ï¼Œç›¸æ¯”Lehmerå¢åŠ å¸¸é‡c
1958å¹´ï¼Œæ–æ³¢é‚£å¥‘ç”Ÿæˆå™¨ï¼ˆLagged Fibonacci generatorï¼‰ï¼Œæ”¹è¿›â€œæ ‡å‡†â€ çº¿æ€§åŒä½™ç”Ÿæˆå™¨ã€‚
1965å¹´ï¼Œçº¿æ€§åé¦ˆç§»ä½å¯„å­˜å™¨(LFSR)
1988å¹´ï¼ŒPark-Millerç”Ÿæˆå™¨ã€‚Park å’Œ Millerå»ºè®®ä¹˜æ³•åŒä½™çš„å‚æ•°ï¼ˆa = 7âµ = 16807ï¼›m = 2Â³Â¹ + 1= 2,147,483,647 ï¼‰ï¼Œç§°ä¸º MINSTD

1997å¹´ï¼Œæ¢…æ£®æ—‹è½¬ç®—æ³•ï¼ˆMersenne twisterï¼‰ï¼ŒåŸºäºæœ‰é™äºŒè¿›åˆ¶å­—æ®µä¸Šçš„çŸ©é˜µçº¿æ€§é€’å½’
2003å¹´ï¼Œä¹”æ²»Â·é©¬è¨åˆ©äºšçš„çº¿æ€§é€’å½’xorshift
2006å¹´ï¼ŒWELLç³»åˆ—ç”Ÿæˆå™¨ï¼Œæé«˜äº† Mersenne Twister çš„è´¨é‡

æ··ä¹±æ³•ï¼Œçº¿æ€§åŒä½™ï¼ˆJava Randomï¼‰ï¼Œå•å‘æ•£åˆ—ï¼ˆSecureRandom SHA1PRNGï¼‰ï¼ŒåŠ å¯†ï¼ŒANSI X9.17
3. å…¶ä»– ä¹˜ä»¥æºå¸¦ï¼Œå‡å»å€Ÿï¼ŒKISSå’Œæ¯äº²æ–¹æ³• 

#### æ–æ³¢é‚£å¥‘
ffmpeg
ä¼˜ï¼šæ— ä¹˜æ³•è¿ç®—
åŠ£ï¼šåºåˆ—éšæœºæ€§ä¸é«˜
#### ä¹˜æ³•åŒä½™
2.  [åŸºäºçº¿æ€§åŒä½™æ–¹æ³• (LCG)æ¥å®ç°PRNG](src\hotspot\share\runtime\os.cpp)
    [Park-Miller RNG](https://en.wikipedia.org/wiki/Lehmer_random_number_generator)
    ã€Šè®¡ç®—æœºç¨‹åºè®¾è®¡çš„è‰ºæœ¯ï¼šå·2ã€‹

    X(n + 1) = (a * X(n) + c) % mï¼Œå½“LCGçš„c = 0ï¼Œç§°ä¸ºä¹˜æ³•ä¸€è‡´ç”Ÿæˆå™¨ ï¼ˆMCGï¼‰æˆ–**Lehmer RNG**/**Park-Miller RNG**
    ```java
        os::random()
        static int random_helper(unsigned int rand_seed) {
        /* standard, well-known linear congruential random generator with
        * next_rand = (16807*seed) mod (2**31-1)// 16807 100000110100111ï¼›(2**31-1) ä¿ç•™ä½ä½æ‰€æœ‰ä¿¡æ¯
        * see
        * (1) "Random Number Generators: Good Ones Are Hard to Find",
        *      S.K. Park and K.W. Miller, Communications of the ACM 31:10 (Oct 1988),
        * (2) "Two Fast Implementations of the 'Minimal Standard' Random
        *     Number Generator", David G. Carta, Comm. ACM 33, 1 (Jan 1990), pp. 87-88.
        */
    ```

 å‘¨æœŸè¶Šå¤§è¶Šæ··ä¹±

#### çº¿æ€§åŒä½™
1. Random
```java
    protected int next(int bits) {
        long oldseed, nextseed;
        AtomicLong seed = this.seed;
        do {a
            oldseed = seed.get();
            nextseed = (oldseed * multiplier + addend) & mask;
        } while (!seed.compareAndSet(oldseed, nextseed));
        return (int)(nextseed >>> (48 - bits));
    }
```

#### xorshift - å¯¹è±¡hash

åŸºäºçº¿æ€§é€’å½’ã€‚xorshift ç”Ÿæˆå™¨çš„è¿è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œå†ç»“åˆéçº¿æ€§æ“ä½œï¼Œé€šè¿‡äº†å¼ºæœ‰åŠ›çš„ç»Ÿè®¡æµ‹è¯•ã€‚

```java
//src\hotspot\share\runtime\thread.cpp
        // thread-specific hashCode stream generator state - Marsaglia shift-xor form
    _hashStateX = os::random();
    _hashStateY = 842502087;//110010001101111000111111000111
    _hashStateZ = 0x8767;    // (int)(3579807591LL & 0xffff) ; 3579807591LL ->11010101010111111000011101100111
    _hashStateW = 273326509;// 273326509->10000010010101010000110101101
    
//src\hotspot\share\runtime\synchronizer.cpp
    // Marsaglia's xor-shift scheme with thread-specific state
    // This is probably the best overall implementation -- we'll
    // likely make this the default in future releases.
    unsigned t = self->_hashStateX;
    t ^= (t << 11);
    self->_hashStateX = self->_hashStateY;
    self->_hashStateY = self->_hashStateZ;
    self->_hashStateZ = self->_hashStateW;
    unsigned v = self->_hashStateW;
    v = (v ^ (v >> 19)) ^ (t ^ (t >> 8));
    self->_hashStateW = v;
    value = v;
```
 

#### SecureRandom
å†…ç½®ä¸¤ç§éšæœºæ•°ç®—æ³•ï¼ŒNativePRNGå’ŒSHA1PRNG
[](class sun.security.provider.SHA)
[SHA1PRNGï¼Œå¯¹ seed æ¶ˆæ¯æ‘˜è¦ç”Ÿæˆ128bitä¼ªéšæœºæ•°ï¼Œæ‰©å¤§å·®å¼‚æ€§](src\java.base\unix\classes\sun\security\provider\NativePRNG.java)
[](src\java.base\share\classes\sun\security\provider\DRBG.java)
[](src\jdk.crypto.mscapi\windows\classes\sun\security\mscapi\PRNG.java)

linuxï¼š/dev/urandom
##### UUID
ç®€å•å·¥å‚
    randomUUID()
å•ä¾‹ï¼ˆå†…éƒ¨ç±»ï¼‰
```java
java.util.UUID.Holder#numberGenerator
```

è£…é¥°
```java
    /*
     * The most significant 64 bits of this UUID.
     *
     * @serial
     */
    private final long mostSigBits;

    /*
     * The least significant 64 bits of this UUID.
     *
     * @serial
     */
    private final long leastSigBits;

```


## å¯†ç å­¦å®¶6ä¸ªé‡è¦çš„å·¥å…·
ã€Šå›¾è§£å¯†ç æŠ€æœ¯ã€‹
ä¼ªéšæœºæ•°ç”Ÿæˆå™¨
å•å‘æ•£åˆ—å‡½æ•°/æ¶ˆæ¯æ‘˜è¦ç®—æ³•
    éªŒè¯æ•°æ®å®Œæ•´æ€§çš„ç®—æ³•
å¯¹ç§°å¯†ç 
å…¬é’¥å¯†ç 
æ¶ˆæ¯è®¤è¯ç ï¼ˆMACï¼ŒMessage Authentication Codeï¼‰
     å®Œæ•´æ€§ã€å¯è®¤è¯æ€§æ¶ˆæ¯ï¼ˆæŒæœ‰å…±äº«å¯†é’¥ï¼Œå¯ä»¥éªŒè¯Aliceå‘é€ï¼‰ã€è®¤è¯ç æ— æ³•é˜²æ­¢å¦è®¤ï¼ˆæ¥æ”¶æ–¹ Bob æŒæœ‰å…±äº«å¯†é’¥ï¼Œå¯èƒ½å¦è®¤ï¼‰
    å•å‘æ•£åˆ—å‡½æ•°å®ç°ï¼šHMAC-MD5ï¼ˆMD5åŠ saltï¼‰
    AESçš„CBCæ¨¡å¼ï¼šAES-CMAC
æ•°å­—ç­¾å
    å®Œæ•´æ€§ã€å¯è®¤è¯æ€§å’Œä¸å¯å¦è®¤æ€§ï¼ˆæ¥æ”¶æ–¹ Bob æŒæœ‰å…¬é’¥ï¼Œä¸å¯å¦è®¤ï¼‰
    å…¬é’¥å¯†ç ä½“åˆ¶éƒ½å¯ä»¥å•ç‹¬ä½œä¸ºä¸€ç§æ•°å­—ç­¾åæ–¹æ¡ˆä½¿ç”¨ï¼ŒMD5withRSA

è®¤è¯åˆ†ä¸ºå®ä½“è®¤è¯å’Œæ¶ˆæ¯è®¤è¯ï¼š
    æ¶ˆæ¯æºè®¤è¯åªè¡¨ç¤ºBobæ”¶åˆ°æ¶ˆæ¯çš„æ¥æºæ˜¯å¯é çš„
æ¶ˆæ¯è®¤è¯ç åªèƒ½å®ç°æ¶ˆæ¯è®¤è¯ï¼Œæ•°å­—ç­¾ååˆ™åŒæ—¶å¯ä»¥å®ç°å®ä½“è®¤è¯å’Œæ¶ˆæ¯è®¤è¯ã€‚

æ¶ˆæ¯è®¤è¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæ¶ˆæ¯æºè®¤è¯ï¼ˆå³æ¶ˆæ¯çš„æ¥æºä¸æ˜¯å†’å……çš„ï¼‰å’Œæ¶ˆæ¯å®Œæ•´æ€§ï¼ˆå³æ¶ˆæ¯æœªè¢«æ¶æ„ç¯¡æ”¹ï¼‰ã€‚


1949å¹´ï¼Œé¦™å†œå‘è¡¨ã€Šä¿å¯†ç³»ç»Ÿçš„é€šä¿¡ç†è®ºã€‹æ ‡å¿—ç€ç°ä»£å¯†ç å­¦çš„çœŸæ­£å¼€å§‹ï¼ˆç¬¬ä¸€æ¬¡è´¨çš„é£è·ƒï¼‰ã€‚
1972å¹´ï¼Œç¾å›½IBMå…¬å¸ç ”åˆ¶çš„å¯¹ç§°å¯†ç ä½“åˆ¶åŠ å¯†ç®—æ³•DES
1976å¹´ï¼ŒDiffieå’ŒHellmanå‘è¡¨ã€Šå¯†ç å­¦çš„æ–°æ–¹å‘ã€‹ï¼Œæ ‡å¿—ç€å…¬é’¥å¯†ç ä½“åˆ¶çš„è¯ç”Ÿï¼ˆç¬¬äºŒæ¬¡è´¨çš„é£è·ƒï¼‰ã€‚
1977å¹´ï¼ŒRivestã€Shamirå’ŒAdlemanæå‡ºäº†RSAå…¬é’¥å¯†ç ä½“åˆ¶
1981å¹´ï¼ŒIBMå‘å¸ƒäº†IBMä¸ªäººè®¡ç®—æœº
1987å¹´ï¼ŒRC4ç”±æç»´æ–¯ç‰¹ï¼ˆRonald Rivestï¼‰è®¾è®¡
1999å¹´ï¼Œdistributed.netä¸ç”µå­å‰å“¨åŸºé‡‘ä¼šåˆä½œï¼Œåœ¨22å°æ—¶15åˆ†é’Ÿå†…å³å…¬å¼€ç ´è§£äº†ä¸€ä¸ªDESå¯†é’¥ã€‚3DESå³é€šè¿‡å¢åŠ DESçš„å¯†é’¥é•¿åº¦æ¥é¿å…ç±»ä¼¼çš„æ”»å‡»ã€‚
1992å¹´ï¼ŒMD5 ç”¨ä»¥å–ä»£MD4ç®—æ³•
1996å¹´ï¼ŒHMACç»“æ„çš„å®šä¹‰å’Œåˆ†æ
2000å¹´ï¼ŒCamelliaç”±ä¸‰è±å’Œæ—¥æœ¬ç”µä¿¡ç”µè¯ï¼ˆNTTï¼‰å…±åŒå‘æ˜
2001å¹´ï¼ŒAESï¼ˆRijndaelåŠ å¯†æ³•ï¼‰å‘å¸ƒäºFIPS PUB 197ã€‚DESæ ‡å‡†å’Œ3DESæ ‡å‡†å·²é€æ¸è¢«é«˜çº§åŠ å¯†æ ‡å‡†ï¼ˆAESï¼‰æ‰€å–ä»£
2004å¹´ï¼Œè¯å®MD5ç®—æ³•æ— æ³•é˜²æ­¢ç¢°æ’æ”»å‡»ï¼Œå› æ­¤ä¸é€‚ç”¨äºå®‰å…¨æ€§è®¤è¯
2008å¹´ï¼ŒChacha20ç”±ä¼¯æ©æ–¯å¦å‘å¸ƒæµåŠ å¯†ç®—æ³•ï¼Œä½œä¸ºOpenSSLä¸­RC4çš„æ›¿ä»£å“
2015å¹´ï¼ŒSHA-3ï¼ˆKeccakï¼‰å‘å¸ƒã€‚RC4ç®—æ³•å­˜åœ¨å¼±ç‚¹ï¼Œæ‰€å‘å¸ƒçš„ RFC 7465 è§„å®šç¦æ­¢åœ¨TLSä¸­ä½¿ç”¨RC4åŠ å¯†ç®—æ³•ã€‚



ç°ä»£å¯†ç å­¦çš„ä¸‰å¤§åŸºç¡€ï¼š1ã€å¤§ç´ æ•°çš„å¼•å…¥ï¼›3ã€ç®—æ³•çš„ä¸å¯é€†æ€§ï¼›2ã€åŸºäºè®¡ç®—æœºè¿ç®—è€Œéæ‰‹ç®—
 

## å•å‘æ•£åˆ—å‡½æ•°/æ•°å­—æ‘˜è¦
æ•°æ®å®Œæ•´æ€§ä¸å®‰å…¨
    å•å‘æ€§ï¼Œæ•£åˆ—å€¼ç§°ä¸º æ‘˜è¦ æˆ–è€… æ•°å­—ç­¾åï¼ˆåŠ å¯†çš„æ‘˜è¦ï¼‰
    æŠ—ä¿®æ”¹ï¼Œä¸ºä»»ä½•æ–‡ä»¶ï¼ˆä¸ç®¡å…¶å¤§å°ã€æ ¼å¼ã€æ•°é‡ï¼‰äº§ç”Ÿä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„â€œæ•°å­—æŒ‡çº¹â€
æŠ¥æ–‡æ‘˜è¦ï¼Œç¡®ä¿æ¶ˆæ¯çš„å®Œæ•´æ€§ï¼ˆæ²¡æœ‰è¢«ç¯¡æ”¹ï¼‰
MD5éœ€è¦æ³¨æ„ç¼–ç æ ¼å¼ï¼Œä½¿ç”¨new String("str".getBytes("UTF-8"), "UTF-8");éœ€è¦è®¾ç½®ç¼–ç æ ¼å¼

 
```java
Apache-Codec
new String[] {
            MD2, MD5, 
            SHA_1, //SHA1 å·²å‘ç°ç¢°æ’
            SHA_224, SHA_256, SHA_384,SHA_512, SHA_512_224, SHA_512_256,//SHA-2 å®‰å…¨ï¼Œç®—æ³•åŒSHA1
             SHA3_224, SHA3_256, SHA3_384, SHA3_512//SHA-3 å®‰å…¨ï¼Œç®—æ³•ä¸åŒSHA1
        }
```
å…¶ä»–ï¼šRIPEMD
### ~~MD5~~ åˆå§‹åŒ–4ä¸ªå­—ï¼Œ128ä¸ªå­—ä¸º1å—ï¼Œå¾ªç¯64æ¬¡
[JDK sun impl](jdk\src\share\classes\sun\security\provider\MD5.java)
[FFmpeg impl](libavutil\md5.c)
[freebsd MD5](https://svnweb.freebsd.org/base/stable/12/lib/libcrypt/crypt-md5.c?view=markup)
å­—ï¼Œå¡«å……ï¼Œå—ï¼Œéå†ï¼Œæ‹¼æ¥
1. initial val word h0(32bit),h1,h2,h3
2. Value+padding0+lengthï¼ˆ64bitï¼‰
3. chunk (512bit)
        words (32bit)
        loop 64
        å³ç§»è½®æ¢h0,h1,h2,h3
4. h0 append h1 append h2 append h3
### ~~SHA-1~~ åˆå§‹åŒ–4ä¸ªå­—ï¼Œ128ä¸ªå­—ä¸º1å—ï¼Œå¾ªç¯80æ¬¡
2017å¹´ è°·æ­Œåœ¨ 2^64 å¤æ‚åº¦ï¼ˆçº¦ 110 GPUå¹´çš„è®¡ç®—é‡ï¼‰å†…å®Œæˆäº†ç¬¬ä¸€æ¬¡ SHA-1 ç¢°æ’
[ffmpeg impl](libavutil\sha.c#av_sha_init)
1. initial h0(32bit),h1,h2,h3,h4
1. Value+padding0+lengthï¼ˆ64bitï¼‰
2. chunk (512bit)
        words (32bit)
        loop 80
        å³ç§»è½®æ¢h0,h1,h2,h3,h4
4. h0 append h1 append h2 append h3 append h4

### SHA-2
```
SHA-224å’ŒSHA-256åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œé™¤äº†ï¼š
    h0åˆ°h7çš„åˆå§‹å€¼ä¸åŒï¼Œä»¥åŠ
    SHA-224è¾“å‡ºæ—¶æˆªæ‰h7çš„å‡½æ•°å€¼ã€‚

SHA-512å’ŒSHA-256çš„ç»“æ„ç›¸åŒï¼Œä½†ï¼š
    SHA-512æ‰€æœ‰çš„æ•°å­—éƒ½æ˜¯64ä½ï¼Œ
    SHA-512è¿è¡Œ80æ¬¡åŠ å¯†å¾ªç¯è€Œé64æ¬¡ï¼Œ
    SHA-512åˆå§‹å€¼å’Œå¸¸é‡æ‹‰é•¿æˆ64ä½ï¼Œä»¥åŠ
    äºŒè€…æ¯”ç‰¹çš„åç§»é‡å’Œå¾ªç¯ä½ç§»é‡ä¸åŒã€‚

SHA-384å’ŒSHA-512åŸºæœ¬ä¸Šæ˜¯ç›¸åŒçš„ï¼Œé™¤äº†ï¼š
    h0åˆ°h7çš„åˆå§‹å€¼ä¸åŒï¼Œä»¥åŠ
    SHA-384è¾“å‡ºæ—¶æˆªæ‰h6å’Œh7çš„å‡½æ•°å€¼ã€‚
```

### SHA-3ï¼ˆKeccakç®—æ³•ï¼‰
æŠ—ç¢°æ’ hash å‡½æ•°

### BLAKE2
2008ï¼ŒBLAKE1ï¼ŒåŸºäºä¸¹å°¼å°”Â·JÂ·ä¼¯æ©æ–¯å¦ChaChaæµå¯†ç çš„å¯†ç æ•£åˆ—å‡½æ•°ï¼Œäº2012è¾“ç»™äº†Keccak
2012ï¼ŒBLAKE2 ç›®çš„æ˜¯å–ä»£å¹¿æ³›ä½¿ç”¨ä½†ç ´æŸçš„MD5å’ŒSHA-1ç®—æ³•ã€‚
2020ï¼Œå®£å¸ƒæ¨å‡ºBLAKE3
#### DSA
RSAå’ŒDHï¼ŒDSAå®‰å…¨æ€§éƒ½æ˜¯åŸºäºæ•´æ•°æœ‰é™åŸŸç¦»æ•£å¯¹æ•°æ¥å®ç°ï¼›
1991å¹´NISTæå‡ºå°†DSAç”¨äºå…¶æ•°å­—ç­¾åæ ‡å‡†ï¼ˆDSSï¼‰ï¼Œå¹¶äº1994å¹´å°†å…¶ä½œä¸ºFIPS 186é‡‡ç”¨



## å¯¹ç§°å¯†é’¥
[JDK 14 Des](src\java.security.jgss\share\classes\sun\security\krb5\internal\crypto\Des.java)
[JDK 14 3Des](src\java.security.jgss\share\classes\sun\security\krb5\internal\crypto\Des3.java)

### åˆ†ç»„åŠ å¯†
[jdk 14 AES åŠ å¯†æ–¹å¼](src\java.base\share\classes\com\sun\crypto\provider\AESCipher.java)
|[åˆ†ç»„å¯†ç åŠ å¯†æ–¹å¼](https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Common_modes)|
|--|
    ECBï¼ˆç”µå­å¯†ç æœ¬ï¼Œç›¸åŒçš„æ˜æ–‡å—å°±ä¼šç”Ÿæˆç›¸åŒçš„å¯†æ–‡å—ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼‰
    CBCï¼ˆå¯†ç å—é“¾æ¥ï¼Œä¸èƒ½å¹¶è¡ŒåŠ å¯†ï¼‰
    CFBï¼ˆå¯†æ–‡åé¦ˆï¼Œæ•°æ®æ®µï¼‰
    OFBï¼ˆè¾“å‡ºåé¦ˆï¼Œä¸ç”¨å¡«å……ï¼Œè¾“å‡ºå—ä½œä¸ºä¸‹ä¸€ä¸ªå—åŠ å¯†çš„è¾“å…¥å—ï¼‰
    CTRï¼ˆè®¡æ•°å™¨æ¨¡å¼ï¼Œä¸ç”¨å¡«å……ï¼‰
    
    GCM ï¼ˆCTR å’Œ GMACï¼ˆGHASHï¼‰ çš„å¤æ‚ç»„åˆï¼‰
    PCBC
|å¡«å……æœ‰å…­ç§|
|--|
    NoPadding  ï¼ˆå¡«å……0ï¼Œä¸¢å¤±åŸæ•°æ®æœ«å°¾çš„ '\0'ï¼‰
    PKCS7Padding
        å¡«å……n(n>0)ä¸ªå­—èŠ‚æ‰å¯¹é½ï¼Œåˆ™ä¸€ç›´å¡«å……å­—èŠ‚n
        ï¼ˆjava ä¸æ”¯æŒPKCS7Paddingï¼Œåªæ”¯æŒPKCS5Paddingï¼Œéœ€è¦ç”¨åˆ°bouncycastleï¼‰
    PKCS5Paddingï¼ˆPKCS7Paddingå­é›†ï¼Œé™å®šäº†å—å¤§å°ï¼Œå¯ä»¥16bitï¼‰
    ISO 10126ï¼ˆå¡«éšæœºæ•°ï¼Œåä¸€ä¸ªå­—èŠ‚æ˜¯å¡«å……çš„å­—èŠ‚æ•°ï¼‰
    ANSI X9.23ï¼ˆå¡«0ï¼Œåä¸€ä¸ªå­—èŠ‚æ˜¯å¡«å……çš„å­—èŠ‚æ•°ï¼‰
    ZerosPadding
### ~~DES/3DES~~

### ~~RC4~~
[](https://zh.wikipedia.org/wiki/RC4)


### AES
[JDK 1.8 krb5 Aes128.java](jdk\src\share\classes\sun\security\krb5\internal\crypto\Aes128.java)

 
AES-256 æ˜¯ä¼ªéšæœºå‡½æ•°

å¯é€†åŸç†ï¼š
a âŠ• b âŠ• a = b
[å¯è§†åŒ–](http://www.formaestudio.com/rijndaelinspector/archivos/Rijndael_Animation_v4_eng-html5.html)

åˆå§‹åŒ–ï¼š

      1. åˆå§‹åŒ–æ›¿æ¢è¡¨<br>
      2. å¡«å……<br>
      3. å¯†é’¥ç”Ÿæˆ Main Round å’Œ Final Round çš„ 10 ä¸ª Round key<br>

åŠ å¯†ï¼š

      1. Initial Roundï¼ˆå¯†é’¥åŠ å¯†ï¼‰
      2. Main Roundï¼ˆ9è½®è®¡ç®— æ›¿æ¢/ç§»ä½/æ··åˆï¼Œå¯†é’¥åŠ å¯†ï¼‰
      3. Final Roundï¼ˆæ›¿æ¢/ç§»ä½ï¼Œå¯†é’¥åŠ å¯†ï¼‰


![è§£å¯†æµç¨‹](res/aes.png)
1. Initial Roundï¼ˆå¯†é’¥åŠ å¯†ï¼‰
2. Main Roundï¼ˆ9è½®è®¡ç®— ç§»ä½ï¼Œå¯†ç è¡¨æ›¿æ¢ï¼Œæ··åˆï¼Œå¯†é’¥åŠ å¯†ï¼‰
3. Final Roundï¼ˆç§»ä½ï¼Œå¯†ç è¡¨æ›¿æ¢ï¼Œå¯†é’¥åŠ å¯†ï¼‰
   
AES-123 å¯é æ€§ï¼š
    ç ´è§£éœ€è¦å°è¯•2^127 â‰ˆ 1.7*10^38ä¸ª128bitçš„éšæœºæ•°ä½œä¸ºå¯†é’¥è¿›è¡ŒåŠ è§£å¯†è¿ç®—ï¼Œæ–¹èƒ½æ‰¾åˆ°æ­£ç¡®çš„å¯†é’¥ã€‚


å¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦æŒ‡å®šç®—æ³•åç§°ã€å·¥ä½œæ¨¡å¼å’Œå¡«å……æ¨¡å¼
```java
//java æ”¯æŒ
// various modes
//     ECB,  CFB,  OFB,  CBC,PCBC
// padding 
//     PKCS5Paddingï¼Œ NoPaddingï¼ŒISO10126Padding

        byte[] seed = "seed".getBytes();//
        byte[] byteContent = "content".getBytes("utf-8");//éœ€è¦æ³¨æ„åŠ å¯†/è§£å¯†çš„ç¼–ç è¦ä¸€æ ·

        KeyGenerator kgen = KeyGenerator.getInstance("AES");//ç®—æ³•
        kgen.init(128, new SecureRandom(seed));//å¯†é’¥é•¿åº¦ï¼›  é€šè¿‡ä¼ å…¥ SecureRandomçš„seedï¼Œç» SHA-1 ä¼ªéšæœºå™¨ï¼ˆä¸åŒå¹³å°è€Œå¼‚ï¼‰ï¼Œç”Ÿæˆ 128 bitå¯†é’¥

        //1. å¿…é¡»è¦è®¾ç½® ç®—æ³•/å·¥ä½œæ¨¡å¼/å¡«å……æ¨¡å¼
        Cipher cipher = Cipher.getInstance("AES");//windows é»˜è®¤ "AES/ECB/PKCS5Padding"
        //2. å¿…é¡»è¦è®¾ç½®å¯¹åº”é•¿åº¦çš„å¯†é’¥
        cipher.init(Cipher.ENCRYPT_MODE, new SecretKeySpec( kgen.generateKey().getEncoded(), "AES"));//ä¼ å…¥ å¯†é’¥å­—èŠ‚ï¼Œé€‰æ‹©åŠ å¯†å®ç°ã€‚init ä» provideræŒ‘é€‰å®ç°ç±»ï¼Œå¹¶åˆå§‹åŒ– spi
        byte[] result = cipher.doFinal(byteContent);
```
### Camellia
### ChaCha20
 

## å…¬é’¥å¯†ç /å¯†é’¥åå•†æœºåˆ¶
[å¯†é’¥åå•†æœºåˆ¶ wiki](https://zh.wikipedia.org/wiki/%E5%82%B3%E8%BC%B8%E5%B1%A4%E5%AE%89%E5%85%A8%E6%80%A7%E5%8D%94%E5%AE%9A)
### èº«ä»½éªŒè¯ -RSAéå¯¹ç§°åŠ å¯†
æ—©æœŸçš„ SSLv2 åªæ”¯æŒä¸€ç§å¯†é’¥åå•†æœºåˆ¶RSAï¼Œæœ€å¤è€çš„å¯†é’¥åå•†æ–¹å¼
#### RSA

##### ç†è®ºï¼š
æ¬§æ‹‰å‡½æ•°ï¼šç»™å®šä»»æ„æ­£æ•´æ•° n ,åœ¨å°äºç­‰äº n çš„æ­£æ•´æ•°ä¸­ï¼Œèƒ½ä¸ n æ„æˆäº’è´¨å…³ç³»çš„æ­£æ•´æ•°ä¸ªæ•°
æ¬§æ‹‰å®šç†ï¼šå¦‚æœä¸¤ä¸ªæ­£æ•´æ•° m å’Œ n äº’è´¨ï¼Œé‚£ä¹ˆ m çš„ Ï†(n) æ¬¡æ–¹ å‡å» 1ï¼Œå¯ä»¥è¢« n æ•´é™¤
è´¹é©¬å°å®šç†ï¼šæ¬§æ‹‰å®šç†åŸºç¡€ä¸Šï¼Œn ä¸ºè´¨æ•°æ—¶ï¼ŒÏ†(n) ç­‰äº n-1
æ¨¡é€†å…ƒï¼šed mod n=1

å…¬å¼æ¨å¯¼ï¼š 
        m çš„ Ï†(n)    æ¬¡æ–¹å¯¹ n æ±‚ä½™ç­‰äº1ï¼›
        m çš„ kÏ†(n)   æ¬¡æ–¹å¯¹ n æ±‚ä½™ç­‰äº1ï¼›
        m çš„ kÏ†(n)+1 æ¬¡æ–¹å¯¹ n æ±‚ä½™ç­‰äº mï¼›
        m çš„ e*d     æ¬¡æ–¹å¯¹ n æ±‚ä½™ç­‰äº mï¼›


å®‰å…¨æ€§æ˜¯åŸºäºæå…¶å›°éš¾çš„å¤§æ•´æ•°çš„åˆ†è§£ï¼ˆä¸¤ä¸ªç´ æ•°çš„ä¹˜ç§¯ï¼‰ï¼›
[è´¨æ•°åˆ—è¡¨](https://www.shuxuele.com/numbers/prime-numbers-to-10k.html)
[åœ¨çº¿æ¬§æ‹‰å‡½æ•°è®¡ç®—](https://www.dcode.fr/euler-totient)
[åœ¨çº¿æ¬§æ‹‰å‡½æ•°è®¡ç®—(å¤§äº1000000000)](http://www.javascripter.net/math/calculators/eulertotientfunction.htm)
```java
é¦–é€‰å–ä¸¤ä¸ªäº’ç´ æ•° på’Œq, ä¹˜æ³•è®¡ç®—p * q å¾—åˆ° Nã€‚

ç„¶åè®¡ç®—å‡ºæ¬§æ‹‰Ï†(N)ï¼š Ï†å‡½æ•°Ï†(N)æ˜¯å°äºæˆ–ç­‰äºNçš„æ­£æ•´æ•°ä¸­ä¸Näº’è´¨çš„æ•°çš„æ•°ç›®ã€‚ æ ¹æ®æ¬§æ‹‰å…¬å¼ï¼Œç”±äºpå’Œqéƒ½æ˜¯ç´ æ•°ï¼Œæ•… Ï†(N) = (p-1)*(q-1)

éšæœºé€‰æ‹©ä¸€ä¸ªæ•´æ•°eï¼Œæ¡ä»¶æ˜¯1< e < Ï†(n)ï¼Œä¸”eä¸Ï†(n) äº’è´¨ã€‚
 æ¥ç€æˆ‘ä»¬è®¡ç®—eå¯¹Ï†(n)çš„æ¨¡é€†å…ƒå¾—åˆ°dï¼š e*d â‰¡ 1 (mod Ï†(n)) è¿™ä¸ªå…¬å¼ç®€å•çš„è¯´å°±æ˜¯ e*dé™¤ä»¥Ï†(N)å¾—åˆ°çš„ä½™æ•°ä¸º1ï¼Œ
è¿™ä¸ªå…¬å¼å¯ä»¥è½¬æ¢æˆ ed%((p-1)(q-1))=1 => ed=k(p-1)(q-1)+1

public KeyPair generateKeyPair() {
        // accommodate odd key sizes in case anybody wants to use them
        int lp = (keySize + 1) >> 1;
        int lq = keySize - lp;
        if (random == null) {
            random = JCAUtil.getSecureRandom();
        }
        BigInteger e = publicExponent;
        while (true) {
            // generate two random primes of size lp/lq
            BigInteger p = BigInteger.probablePrime(lp, random);
            BigInteger q, n;
            do {
                q = BigInteger.probablePrime(lq, random);
                // convention is for p > q
                if (p.compareTo(q) < 0) {
                    BigInteger tmp = p;
                    p = q;
                    q = tmp;
                }
                // modulus n = p * q
                n = p.multiply(q);
                // even with correctly sized p and q, there is a chance that
                // n will be one bit short. re-generate the smaller prime if so
            } while (n.bitLength() < keySize);

            // phi = (p - 1) * (q - 1) must be relative prime to e
            // otherwise RSA just won't work ;-)
            BigInteger p1 = p.subtract(BigInteger.ONE);
            BigInteger q1 = q.subtract(BigInteger.ONE);
            BigInteger phi = p1.multiply(q1);
            // generate new p and q until they work. typically
            // the first try will succeed when using F4
            if (e.gcd(phi).equals(BigInteger.ONE) == false) {//ä¸æ˜¯äº’è´¨ï¼Œé‡æ–°æ‰¾p,q
                continue;
            }

            // private exponent d is the inverse of e mod phi
            BigInteger d = e.modInverse(phi);  //e*d ä¸phiæ¬§æ‹‰å‡½æ•°äº’è´¨

            // 1st prime exponent pe = d mod (p - 1)
            BigInteger pe = d.mod(p1);
            // 2nd prime exponent qe = d mod (q - 1)
            BigInteger qe = d.mod(q1);

            // crt coefficient coeff is the inverse of q mod p
            BigInteger coeff = q.modInverse(p);

            try {
                PublicKey publicKey = new RSAPublicKeyImpl(n, e);
                PrivateKey privateKey =
                        new RSAPrivateCrtKeyImpl(n, e, d, p, q, pe, qe, coeff);
                return new KeyPair(publicKey, privateKey);
            } catch (InvalidKeyException exc) {
                // invalid key exception only thrown for keys < 512 bit,
                // will not happen here
                throw new RuntimeException(exc);
            }
        }
    }
```
##### java-sun
[JDK1.8 RSA keyç”Ÿæˆè¿‡ç¨‹](openjdk/jdk/src/share/classes/sun/security/rsa/RSAKeyPairGenerator.java)
[JDK 14](src\java.base\share\classes\sun\security\rsa\RSAKeyPairGenerator.java)

##### å¯é æ€§-å¤§æ•´æ•°è´¨å› å­åˆ†è§£
```wiki
       Alice                         Bob
+----------------+             +---------------+
|      p,q,n,e,d |             |               |
|                |             |               |
|m^(e*d)â‰¡m(mod n)| -- e,n ---> |   e,n         |
|                |             |               |
|                |             |               |
|   m^dâ‰¡c (mod n)| ----c-----> |  c^e â‰¡m (mod n)|
|                |             |               |
|                |             |               |
+----------------+             +---------------+

```
dæ³„éœ²ï¼Œå°±ç­‰äºç§é’¥æ³„éœ²
1. ed â‰¡ 1(mod Ï†(n)) åªæœ‰çŸ¥é“eå’ŒÏ†(n)ï¼Œæ‰èƒ½ç®—å‡ºd 
2. Ï†(n)=(p-1)(q-1) åªæœ‰çŸ¥é“på’Œq,æ‰èƒ½ç®—å‡ºÏ†(nï¼‰
3. n=pq,åªæœ‰å°†nåˆ†è§£æ‰èƒ½ç®—å‡ºpå’Œq
##### æ…¢
å¹‚æ¨¡è¿ç®—



### å¯†é’¥äº¤æ¢ DHï¼ˆç¦»æ•£å¯¹æ•°é—®é¢˜ï¼‰ã€ECDH/ECDSAï¼ˆ â€œæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°é—®é¢˜â€ï¼‰
[ECKeyPairGenerator](jdk\src\share\classes\sun\security\ec\ECKeyPairGenerator.java)
ä¸æ”¯æŒè®¤è¯ï¼Œä¸ºé¿å…é­é‡ MITM æ”»å‡»ï¼Œé¡»é ç­¾åç®—æ³•å¸®å¿™æ¥è¿›è¡Œèº«ä»½è®¤è¯ï¼Œå³å¦‚ä½¿ç”¨RSAï¼Œéœ€è¦èµ°RSAçš„CAæµç¨‹
SSLv3å¼€å§‹æ”¯æŒDH-RSAï¼ŒECDH-RSA
#### DH
æ¨¡pä¸‹ **g^{ab}** å’Œ  **g^{ba}**  ç›¸ç­‰ï¼Œéƒ½ç­‰äº **K**

```wiki
       Alice                         Bob
+----------------+             +---------------+
|      a,g,p     |             |     b         |
|                |             |               | 
|   A=g^a mod  p | --g,p,A---> |  B=g^b  mod  p|
|                |             |               |
|   K=B^a  mod  p| <----B----- |  K=A^b  mod  P|
|                |             |               |
|                |             |               |
+----------------+             +---------------+

```

å·²çŸ¥Aliceçš„ A, g, pï¼Œå¾ˆéš¾æ±‚å¾—a
#### ECDH
[æ¤­åœ†æ›²çº¿](https://zh.wikipedia.org/wiki/%E6%A4%AD%E5%9C%86%E6%9B%B2%E7%BA%BF)
[ECC](https://zhuanlan.zhihu.com/p/101907402)
```wiki
å…±äº«æ›²çº¿å‚æ•°ï¼ˆæ¤­åœ†æ›²çº¿Eã€é˜¶Nã€åŸºç‚¹Gï¼‰
       Alice                         Bob
+----------------+             +---------------+
|    a           |             |     b         |
|                |             |               |
|   A=a*G        | -----A----> |  B=b*G        |
|                |             |               | 
|  (xk,yk)=a*B   | <----B----- |  (xk,yk)=b*A  |
|                |             |               |
|  xk as secret  |             |  xk as secret |
+----------------+             +---------------+

``` 

æ¤­åœ†æ›²çº¿ä¹˜æ³•æ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š
    å¯¹äºä»»æ„æ­£æ•´æ•°kå’Œjï¼Œ
    k*(j*P)=(kj)*P=(jk)*P=j*(k*P)
æ¤­åœ†æ›²çº¿åŠ å¯†ï¼ˆECCï¼‰ï¼š
    yÂ²=xÂ³+ax+b (mod p)ï¼›
    å…¶ä¸­ p æ˜¯ç´ æ•°ï¼Œa å’Œ b ä¸ºä¸¤ä¸ªå°äº p çš„éè´Ÿæ•´æ•°ï¼Œ
    æ»¡è¶³ 4aÂ³+27bÂ²(mod p)â‰ 0

##### å¯é æ€§ - æ¤­åœ†æ›²çº¿ä¸Šçš„ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼š
    ç»™å®šç´ æ•°på’Œæ¤­åœ†æ›²çº¿Eï¼Œå¯¹ Q=kP,åœ¨å·²çŸ¥P,Qçš„æƒ…å†µä¸‹æ±‚å‡ºå°äºpçš„æ­£æ•´æ•°kã€‚
    å·²çŸ¥kå’ŒPè®¡ç®—Qæ¯”è¾ƒå®¹æ˜“ï¼Œè€Œç”±Qå’ŒPè®¡ç®—kåˆ™æ¯”è¾ƒå›°éš¾ï¼Œè‡³ä»Šæ²¡æœ‰æœ‰æ•ˆçš„æ–¹æ³•æ¥è§£å†³è¿™ä¸ªé—®é¢˜
##### æŠ“åŒ…
```java
        try {
            Socket socket = new Socket("14.215.177.38",80);//ping www.baidu.com tls_1.2_ECDH
            InputStream inputStream = socket.getInputStream();
            OutputStream outputStream = socket.getOutputStream();
            outputStream.write("hello".getBytes());
            socket.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
```
```plantuml
@startuml
Client -> Server: Client Hello

Server-> Client : Server Hello
activate Server
Server-> Client : Certificate
Server-> Client : Server Key Exchange
Server-> Client : Server Hello Done
deactivate Server

Client -> Server: Client Key Exchange
activate Client 
Client -> Server: Change Cipher Spec
Client -> Server: Encrypted Handshake Message
deactivate Client 


Server-> Client : Change Cipher Spec
activate Server
Server-> Client : Encrypted Handshake Message
deactivate Server
@enduml
```
### ä¾é å…±äº«çš„å¯†é’¥ PSKï¼ŒSRPç­‰
TLS 1.0å¼€å§‹æ”¯æŒPSK-RSAï¼ŒSRPã€‚ä¸éœ€è¦éƒ¨å± CA è¯ä¹¦

## bitä¸² é”™è¯¯æ£€æµ‹/æ•°æ®æ ¡éªŒ
ç®€ä¾¿ã€é€Ÿåº¦å¿«ï¼Œæ£€æµ‹æˆ–æ ¡éªŒæ•°æ®ä¼ è¾“/ä¿å­˜åå‡ºç°çš„é”™è¯¯ã€‚
æ²¡æœ‰æŠ—æ•°æ®ç¯¡æ”¹çš„èƒ½åŠ›

[](https://en.wikipedia.org/wiki/Error_detection_and_correction)
å¥‡å¶æ ¡éªŒ
    å˜ä½“æœ‰çºµå‘å†—ä½™æ ¡éªŒã€å‚ç›´å†—ä½™æ£€æŸ¥ï¼Œä»¥åŠåŒæˆ–å¯¹è§’å¥‡å¶
æ ¡éªŒå’Œ
å¾ªç¯å†—ä½™æ ¡éªŒï¼ˆCRCï¼‰
åŠ å¯†æ•£åˆ—å‡½æ•°
é”™è¯¯çº æ­£ç 

æ•´æ•°åŠ æ³•æ ¡éªŒå’Œï¼ŒOneâ€™s complement â€œchecksumâ€ï¼ŒFletcher Checksum

Adler Checksumï¼ŒATN Checksum (AN/466)ï¼Œæ¨¡ 2 é™¤æ³•


error correction:
1949  æ±‰æ˜ç 
1950  é¦™å†œä¿¡æ¯è®º
1960 é‡Œå¾·-æ‰€ç½—é—¨ç 
1990 æ¶¡è½®ç 
1991 é‡å­çº é”™ç  shor codes quantum
#### æ ¡éªŒå’Œ
[](https://www.youtube.com/watch?v=ga_1YP7HExw)
å‘é€æ–¹ Aliceï¼š
1. åˆ†æ®µ
2. æ®µä¸æ®µæ±‚å’Œã€‚æº¢å‡ºæ—¶ï¼Œæ”¾åœ¨ä½ä½
3. æ±‚åï¼Œå¾—åˆ°checksum

æ¥æ”¶æ–¹ Bobï¼š
1. åˆ†æ®µ
2. æ®µä¸æ®µæ±‚å’Œã€‚æº¢å‡ºæ—¶ï¼Œæ”¾åœ¨ä½ä½
2. æœ€æ€»ä¸checksumæ±‚å’Œã€‚æº¢å‡ºæ—¶ï¼Œæ”¾åœ¨ä½ä½
3. æ±‚åã€‚å¾—åˆ°0ï¼Œæ•°æ®çš„æ ¡éªŒæˆåŠŸ

#### CRC å¾ªç¯å†—ä½™æ ¡éªŒ
[](http://www.ip33.com/crc.html)
åŸºäºä¼½ç½—ååŸŸ(Galois Field) GF(2)ï¼ˆå³é™¤ä»¥ 2 çš„åŒä½™ï¼‰

éœ€è¦è®¾ç½®ï¼šä½å®½ï¼ˆbitsï¼‰ï¼Œå¤šé¡¹å¼ï¼ˆpolyï¼‰
```c++
ffmpeg/avutil crc.h
å‚æ•°æ¨¡å‹
typedef enum {
    AV_CRC_8_ATM,
    AV_CRC_16_ANSI,
    AV_CRC_16_CCITT,
    AV_CRC_32_IEEE,
    AV_CRC_32_IEEE_LE,  /*< reversed bitorder version of AV_CRC_32_IEEE */
    AV_CRC_16_ANSI_LE,  /*< reversed bitorder version of AV_CRC_16_ANSI */
    AV_CRC_24_IEEE,
    AV_CRC_8_EBU,
    AV_CRC_MAX,         /*< Not part of public API! Do not use outside libavutil. */
}AVCRCId;
```
[](http://www.sunshine2k.de/articles/coding/crc/understanding_crc.html)
[](http://www.xjtudll.cn/Exp/273/)
æŸ¥è¡¨æ³•å®é™…ä¸Šåˆ©ç”¨çš„æ˜¯XORè¿ç®—çš„äº¤æ¢å¾‹å’Œç»“åˆå¾‹ï¼Œå³ï¼ˆA XOR B ï¼‰XOR C = A XOR ï¼ˆB XOR Cï¼‰ 
    ç›´æ¥è®¡ç®—å¤šé¡¹å¼Næ¬¡ï¼ŒæŸ¥è¡¨æ³•åªéœ€è¦è®¡ç®—ä¸€æ¬¡ï¼Œå‡å°‘è®¡ç®—æ¬¡æ•°ã€‚
åˆå§‹åŒ–ï¼šå‚æ•°æ¨¡å‹ï¼ˆå¿½ç•¥æœ€é«˜ä½ï¼‰
        æ ¹æ®å‚æ•°æ¨¡å‹çš„ä½æ•°ï¼Œå¡«å…… 0 æ•°æ®
1. ç›´æ¥è®¡ç®—ï¼ˆé™¤æ³•/å¼‚æˆ–ï¼‰æˆ–ç´¢å¼•è¡¨æ³•ï¼Œå¾—åˆ°ä½™æ•°
2. ä½™æ•°ä¸å¡«å……çš„ä½æ•°äº¦æˆ–/æ›¿æ¢ï¼Œå¾—åˆ°æœ€æ€»æ•°æ®æµ

æ ¡éªŒï¼š
1. ç›´æ¥è®¡ç®—ï¼ˆé™¤æ³•/å¼‚æˆ–ï¼‰æˆ–ç´¢å¼•è¡¨æ³•ï¼Œå¾—åˆ°ä½™æ•°ã€‚ä½™æ•° 0 ï¼Œä»£è¡¨æ ¡éªŒæˆåŠŸ

## bitä¸² æ¯”ç‰¹å‹ç¼©

æ— æŸ
    ç†µç±»å‹   éœå¤«æ›¼ç¼–ç 
    å­—å…¸ç±»å‹ LZ77ï¼ˆæ»‘åŠ¨çª—å£å‹ç¼©ï¼‰/LZ78ï¼ŒLZWï¼ŒDEFLATEï¼ˆåŒæ—¶ä½¿ç”¨LZSSå’Œéœå¤«æ›¼ç¼–ç ï¼‰
    è¡Œé•¿ç¼–ç ï¼ˆRLE è¿ç”¨JPEGï¼‰
æœ‰æŸ
    è½¬æ¢ç±»å‹ ç¦»æ•£ä½™å¼¦å˜æ¢ 
    é¢„æµ‹ç±»å‹ è¿åŠ¨è¡¥å¿/ä¼°è®¡/å‘é‡ï¼Œå¿ƒç†å£°
éŸ³é¢‘
    å¥ˆå¥æ–¯ç‰¹-é¦™å†œé‡‡æ ·å®šç†
å›¾ç‰‡
    å®å—åƒç´ ï¼Œé‡åŒ–
å›ºå®šä½é•¿ç®—æ³•
1928ï¼Œå“ˆé‡ŒÂ·å¥ˆå¥æ–¯ã€ŠCertain topics in telegraph transmission theoryã€‹ä¸­å°±å·²éšå«äº†é‡‡æ ·å®šç†
1949ï¼Œé¦™å†œåœ¨ã€ŠCommunication in the presence of noiseã€‹ä¸­æå‡ºé‡‡æ ·å®šç†
1952, Huffman coding, "A Method for the Construction of Minimum-Redundancy Codes"
1967ï¼Œæ¨¡æ‹Ÿç”µè§†ä¿¡å·ä¼ è¾“å°±é‡‡ç”¨äº†è¿è¡Œé•¿åº¦ç¼–ç ï¼ˆRLEï¼‰æ–¹æ¡ˆ
1972ï¼Œçº³è¥¿å°”Â·è‰¾å“ˆè¿ˆå¾·é¦–æ¬¡æå‡ºçš„DCTæ˜¯ä¿¡å·å¤„ç†å’Œæ•°æ®å‹ç¼©ä¸­å¹¿æ³›ä½¿ç”¨çš„è½¬æ¢æŠ€æœ¯ã€‚
1977ï¼ŒLZ77
1982ï¼ŒLZSS
1987, MDCT
1996ï¼ŒDeflate ï¼ˆ RFC 1951ï¼‰

### RLE
Lengthï¼ˆ1byteï¼‰+é‡å¤æ•°æ®ï¼ˆ1byteï¼‰
ç‰¹æ®Šï¼šlengthç­‰äº0
Lengthï¼ˆç­‰äº0ï¼‰+numï¼ˆé€å­—ç¼–ç æ•°é‡ï¼Œå¤§äº2ï¼‰+é‡å¤æ•°æ®ï¼ˆé€å­—ç¼–ç ï¼‰
Lengthï¼ˆç­‰äº0ï¼‰+numï¼ˆé€å­—ç¼–ç æ•°é‡ï¼Œå°äºç­‰äº2ï¼Œç»“æŸï¼‰ 
### LZ77
æ»‘åŠ¨çª—å£
    æŸ¥è¯¢ç¼“å†²åŒº
    å…ˆè¡Œç¼“å†²åŒº
ç¼–ç ï¼š
    offsetï¼ˆæŸ¥è¯¢ç¼“å†²åŒºä¸å…ˆè¡Œç¼“å†²åŒºé‡å¤æ—¶çš„åç§»é‡ï¼‰,lengthï¼ˆé‡å¤å­—ç¬¦é•¿åº¦ï¼‰,char_after_lengthï¼ˆé‡å¤åç¬¬ä¸€ä¸ªä¸åŒå­—ç¬¦ï¼‰

#### å­—èŠ‚å‹ç¼©
##### å¯å˜é•¿åº¦ç¼–ç ï¼ˆVLCï¼‰

##### CABACå‹ç¼©
## æ•°æ®å­¦ä¹  - äººå·¥æ™ºèƒ½
[è§ çŸ¥è¯†ä½“ç³»-äººå·¥æ™ºèƒ½.md](çŸ¥è¯†ä½“ç³»-äººå·¥æ™ºèƒ½.md)



## guava
Collection
