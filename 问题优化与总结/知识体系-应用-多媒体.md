## 图像化

Bitmap（png,jpeg,gif）

## 音视频概念
[音频知识](https://blog.csdn.net/mandagod/article/details/77895472)
[视频开发基础知识](https://blog.csdn.net/yuqingzhude/article/details/78676906)

视频要素：宽，高,像素格式
音频要素：采样率（每秒的采样 8000/44100）, bit(位宽)，channel(声道数)
### 编码
视频：（一堆图片，需要编码压缩）
YUV420/422->H264
rgb888->H264
YUV420->H263
音频：
PCM(原始)->AAC
PCM(原始)->G726
PCM(原始)->G711

### 转码
视频：修改分辨率（resolution），帧率（frame rate），比特率等编码参数
音频：改变采样率（bit rate），通道数（channels），位宽（sample format）
#### 采样率
人耳能听到的声波的频率范围通常?    20~20000Hz
为了保证声音不失真，采样频率应在40kHz以上
常用的音频采样频率有：8kHz、11.025kHz、22.05kHz、16kHz、37.8kHz、44.1kHz、48kHz、96kHz、192kHz等。
例如:电话是标准的8khz采样率!
### 封装
封装（mux)：复用，按一定格式组织原始音视频流

解封装（Demux）：按照一定格式解析出原始音视频流

### 流
ES流
PES流
TS流
rtsp流
rtmp流
hls流
流媒体：采用流式传输方式
推模式
拉模式
实时流
--------------

### 音频帧（frame）
取2.5ms~60ms为单位的数据量为一帧音频
```
AAC: 一个AAC帧对应的采样点个数1024, 采样率(samplerate)为 44100Hz
当前一帧的播放时间 = 1024 * 1000000/44100= 22.32ms(单位为ms)
mp3: 每帧均为1152个字节
当前一帧的播放时间 = 1152* 1000000/44100= 26.122ms(单位为ms)
```
mp3,mp4

### qsv硬编码

### hls
分割成磁盘ts文件，而不是像rtmp放在内存
ffmpeg -i D:\file\ffmpeg\big_buck_bunny.mp4 -vcodec copy -an -f hls D:\cache\video\test.m3u8

### 前端设备
ip camera 内置rtsp服务

gb28181服务，开源库 PJSIP，
### 算法
音频算法处理（去噪、静音检测、回声消除、音效处理、功放/增强、混音/分离，等等）

### 播放时间

文件格式 flv,mp4 ,mpegts,avi
音视频格式 H264,H265,AAC,G711

播放等待，pts,dts



## ffmpeg
```
            （去掉头部，保留显示的数据）
+-----------+              +---------------+
|           |   Demuxer    |Encode         |
|Input FIle +------------> |data           |
|           |   (解封装)   |packets        |
+-----------+              +---------+-----+
                                     |
                                     |
                                     |Decoder
           +------------------+      |
           |                  | <----+
    +----+ | Decoded frames   |（显示在界面的bit流）
    |      +------------------+
    |
    v Encoder

+-----------+             +-----------------+
|Encoded    |   Muxer     |                 |
|data       +-----------> | Output File     |
|packet     |             |                 |
+-----------+             +-----------------+

```

```
                      
                    drawTxt           scale
                    filter            filter
+------+           +-------+         +-------+          +-------+
|      |     in    |       | out  in |       | out      |       |
|source| +----->   |       | +-----> |       | +----->  | Sink  |
+------+           +-------+         +-------+          +-------+



```
### 重要**数据**结构
AVFormatContext
AVFrame
AVPacket
AVStream
AVCodecContext
#### filter
YUV

grap

filter context

filter


#### 点播模型

select io模型
epool 模型