
# 版本控制系统(CVS)

## 中央版本库来进行集中控制(CCVS) svn (Apache Subversion) 
[](https://subversion.apache.org/docs/)

```
Repository

trunk 
tags
branch

Working copy: Working copy is a snapshot of the repository.
Commit changes: Commit is a process of storing changes from private workplace to central server. 
```

```
                              create()
+-------+-------+trunk()+---------------+       checkout()            +--------—--------+
|    trunk      +-<---+ |    Repository |   +---------------------->  |   clone repo     |
+-----+---------+       +---------------+   +------------+            +--------+--------+
      |                                                  |                     |
      |                     +    ^                       | update()            v  edit file
      |                     |    |                       |            +--------+---------+
      |                     |    |                       |            |   modify file    |
      |                     |    |                       +--------->  |
      |                     |    |                                    +--------+---------+
      |                     |    |                                             |
      |                     |    |                                             v status()/diff()
      |                     |    |                                     +-------+---------+
      |                     |    |                                     |  review change  |
      |                     |    |                                     |                 |
      |                     |    |                                     +--------+--------+
      |                     |    |                                              |  commit  and push
      |                     |    |                                              v
      |                     |    |          commit()                   +--------+--------+
      |                     |    +-------------------------------------+    commit change| <----------+
      |                     |                                          +--------+--------+            |
      |                     |                                                   |                     |
      |                     |                                                   |  amend and push     |
      |                     |                revert()                   +-------v---------+           |
      |                     |                                           |                 |           |
      |                     +-----------------------------------------> |  Fix mistakes   |           |
      |                                                                 |                 |           |
      |                                                                 +--------+--------+           |
      |                                      merge()                             v merge              |
      |                                                                 +--------+--------+           |
      +---------------------------------------------------------------> |Resolve Conflicts|           |
                                                                        +--------+--------+           |
                                                                                 | resolve()          |
                                                                                 +---------------------

```
标准目录
```
project
  |
  +-- trunk
  +     |
  +     +----- main.cpp  (3.0版本的最新文件）
  +     +----- common.h
  +
  +-- branches
  +     |
  +     +-- r1.0
  +     +     |
  +     +     +---- main.cpp （1.x版本的最新文件）
  +     +     +---- common.h 
  +     
  +-- tags   (此目录只读)
        |
        +-- r1.0
        +     |
        +     +---- main.cpp （1.0版本的发布文件）
        +     +---- common.h
```
## 分布式的VCS (DVCS) -git

https://git-scm.com/book/en/v2/Git-Internals-Plumbing-and-Porcelain

```
+---------+---------+-------------------------+---------------------+------+------+
|         |         |         original        |                     |      |      |
|         |         |                         |                     |      |      |
|         |         | heads   remotes    tags |  pack  info sha-1...| refs |      |
+---------------------------------------------------------------------------------+
| configs |     HEAD|           refs          |      objects        | logs | index|
+---------+-----------------------------------+---------------------+------+------+
|                                 .git Directory                                  |
+---------------------------------------------------------------------------------+


```
03. Git三大特色之Branch(分支)
04. Git三大特色之Stage(暂存区)
05. Git三大特色之WorkFlow(工作流)
[git工作流](https://www.jianshu.com/p/8200d4d90d77)

分支管理模型
- Git-Flow
- Github Pull Request
- Gitblit Ticket

git merge squash/rebase 


git config --global http.postbuffer 524288000 
 

```js

配置git上代理地址 
git config --global http.proxy "127.0.0.1:8580"
git config --global http.proxy "127.0.0.1:9666"

Winodws系统的做法：打开CMD，输入ipconfig /flushdns 
Linux的做法：在终端输入sudo /etc/init.d/networking restart 


如需取消代理配置,输入 
git config --global --unset http.proxy

git log --reverse
git log --reverse --tags --simplify-by-decoration --pretty="format:%ai %d" 

git branch initial_revision <commit id>

git checkout initial_revision  

git show-ref

//显示tag
 git tag -n --sort=taggerdate
 git for-each-ref --sort=taggerdate --format '%(refname) %(taggerdate)' refs/tags
 
 git checkout -b <new branch name> <tag_name>

```

[git stash 贮藏](https://www.cnblogs.com/zndxall/archive/2018/09/04/9586088.html)
[git stage 暂存]()

[git reset 回滚]()
[git revert 撤销]()
某次操作，此次操作之前和之后的commit和history都会保留，并且把这次撤销
[git rebase ]()

```
 +--------------------------------------------+------------------------------------+
 |                                            |                                    |
 |                                            |                                    |
 |                                            |                                    |
 |                                            |                                    |
 |                                            |          cache.h                   |
+----------------------------------------------------------------------------------+
 |                                            |          sha1 algorith             |
 +---------------------------------------------------------------------------------+
 |     BLOB     TREE     CHANGESET   TRUST    |            cache                   |
 +---------------------------------------------------------------------------------+
 |       object database                      |       current directory cache      |
 +---------------------------------------------------------------------------------+
 |                               Git                                               |
 +--------------------------------------------+------------------------------------+


```

```shell

git show-ref命令查看 
.git/refs/heads不存在HEAD指向的文件，这个时候可以用

```
[修改用户名](https://www.cnblogs.com/codeking100/p/10324579.html)

```
git filter-branch -f --env-filter "GIT_AUTHOR_NAME='Newname'; GIT_AUTHOR_EMAIL='newemail'; GIT_COMMITTER_NAME='Newname'; GIT_COMMITTER_EMAIL='newemail';" HEAD

git push --force

```
##  Repo
Repo是谷歌用Python脚本写的调用git的一个脚本，可以实现管理多个git库。

Gerrit,一种免费、开放源代码的代码审查软件,使用网页界面。

[git删除本地所有的更改 ](https://www.cnblogs.com/ryanzheng/p/8573155.html?_t=1561774191)
```
git checkout -f
 
git reset --hard 

git clean -xdf 

```

